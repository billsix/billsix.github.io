<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html"><link rel="search" title="Search" href="search.html"><link rel="next" title="3D Perspective - Demo 18" href="ch18.html"><link rel="prev" title="Lambda Stack - Demo 16" href="ch16.html">

    <!-- Generated with Sphinx 8.1.3 and Furo 2025.09.25 -->
        <title>Moving Camera in 3D Space - Demo 17 - Model View Projection 0.0.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="static/pygments.css?v=acfd86a5" />
    <link rel="stylesheet" type="text/css" href="static/styles/furo.css?v=50c23ec3" />
    <link rel="stylesheet" type="text/css" href="static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="static/custom.css?v=b6a38b70" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Model View Projection 0.0.2 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">Model View Projection 0.0.2 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch01.html">Opening a Window - Demo 01</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch02.html">Draw A Rectangle - Demo 02</a></li>
<li class="toctree-l1"><a class="reference internal" href="mathhomework1.html">Math Homework #1</a></li>
<li class="toctree-l1"><a class="reference internal" href="programmingproj1.html">Programming Project #1</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch03.html">Window Resizing and Proportionality - Demo 03</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch04.html">Moving the Paddles - Keyboard Input - Demo 04</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch05.html">Add Translate Method to Vector - Demo 05</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch06.html">Modelspace - Demo 06</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch07.html">Rotations - Demo 07</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch08.html">Rotation Fix Attempt 1 - Demo 08</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch09.html">Rotation Fixed - Sequence of Transformations - Demo 09</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch10.html">Camera Space - Demo 10</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch11.html">Relative Objects - Demo 11</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch12.html">Rotate the Square - Demo 12</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch13.html">Rotate the Square Around Paddle 1 - Demo 13</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch14.html">Adding Depth - Z axis Demo 14</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch15.html">Adding Depth - Enable Depth Buffer - Demo 15</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch16.html">Lambda Stack - Demo 16</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Moving Camera in 3D Space - Demo 17</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch18.html">3D Perspective - Demo 18</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch19.html">Matrix Stacks - Demo 19</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch20.html">Shaders - Demo 20</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch21.html">OpenGL3.3 Core Profile - Demo 21</a></li>
<li class="toctree-l1"><a class="reference internal" href="perspective.html">Standard Perspective Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="miscellany.html">Miscellany</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="sources/ch17.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="moving-camera-in-3d-space-demo-17">
<h1>Moving Camera in 3D Space - Demo 17<a class="headerlink" href="#moving-camera-in-3d-space-demo-17" title="Link to this heading">¶</a></h1>
<section id="objective">
<h2>Objective<a class="headerlink" href="#objective" title="Link to this heading">¶</a></h2>
<p>Make a moving camera in 3D space.  Use Ortho to transform a rectangular prism, defined relative to camera space,
into NDC.</p>
<figure class="align-center" id="id1">
<img alt="Camera" class="no-scale" src="images/ortho.png" />
<figcaption>
<p><span class="caption-text">Camera space with ortho volume</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="problem-purposefully-put-in">
<h3>Problem purposefully put in<a class="headerlink" href="#problem-purposefully-put-in" title="Link to this heading">¶</a></h3>
<p>When running this demo and moving the viewer, parts of the geometry will disappear.
This is because it gets “clipped out”, as the geometry will be outside
of NDC, (-1 to 1 on all three axis).  We could fix this by making
a bigger ortho rectangular prism, but that won’t solve the fundamental
problem.</p>
<p>This doesn’t look like a 3D application should, where objects further away
from the viewer would appear smaller.  This will be fixed in demo17.</p>
<figure class="align-center" id="id2">
<img alt="Demo 16" class="no-scale" src="images/demo16.png" />
<figcaption>
<p><span class="caption-text">Demo 16, which looks like trash</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="how-to-execute">
<h2>How to Execute<a class="headerlink" href="#how-to-execute" title="Link to this heading">¶</a></h2>
<p>Load src/modelviewprojection/demo17.py in Spyder and hit the play button.</p>
</section>
<section id="move-the-paddles-using-the-keyboard">
<h2>Move the Paddles using the Keyboard<a class="headerlink" href="#move-the-paddles-using-the-keyboard" title="Link to this heading">¶</a></h2>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Keyboard Input</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>w</em></p></td>
<td><p>Move Left Paddle Up</p></td>
</tr>
<tr class="row-odd"><td><p><em>s</em></p></td>
<td><p>Move Left Paddle Down</p></td>
</tr>
<tr class="row-even"><td><p><em>k</em></p></td>
<td><p>Move Right Paddle Down</p></td>
</tr>
<tr class="row-odd"><td><p><em>i</em></p></td>
<td><p>Move Right Paddle Up</p></td>
</tr>
<tr class="row-even"><td><p><em>d</em></p></td>
<td><p>Increase Left Paddle’s Rotation</p></td>
</tr>
<tr class="row-odd"><td><p><em>a</em></p></td>
<td><p>Decrease Left Paddle’s Rotation</p></td>
</tr>
<tr class="row-even"><td><p><em>l</em></p></td>
<td><p>Increase Right Paddle’s Rotation</p></td>
</tr>
<tr class="row-odd"><td><p><em>j</em></p></td>
<td><p>Decrease Right Paddle’s Rotation</p></td>
</tr>
<tr class="row-even"><td><p><em>UP</em></p></td>
<td><p>Move the camera up, moving the objects down</p></td>
</tr>
<tr class="row-odd"><td><p><em>DOWN</em></p></td>
<td><p>Move the camera down, moving the objects up</p></td>
</tr>
<tr class="row-even"><td><p><em>LEFT</em></p></td>
<td><p>Move the camera left, moving the objects right</p></td>
</tr>
<tr class="row-odd"><td><p><em>RIGHT</em></p></td>
<td><p>Move the camera right, moving the objects left</p></td>
</tr>
<tr class="row-even"><td><p><em>q</em></p></td>
<td><p>Rotate the square around its center</p></td>
</tr>
<tr class="row-odd"><td><p><em>e</em></p></td>
<td><p>Rotate the square around paddle 1’s center</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>Before starting this demo, run mvpVisualization/modelvieworthoprojection/modelvieworthoprojection.py, as
it will show graphically all of the steps in this demo.  In the GUI,
take a look at the camera options buttons, and once the camera
is placed and oriented in world space, use the buttons to change the camera’s position
and orientation.  This will demonstrate what we have to do for moving the
camera in a 3D scene.</p>
<p>There are new keyboard inputs to control the moving camera.
As you would expect to see
in a first person game, up moves the camera forward (-z),
down moves the camera backwards (z), left rotates the camera
as would happen if you rotated your body to the left, and likewise
for right. Page UP and Page DOWN rotate the camera to look up
or to look down.</p>
<p>To enable this, the camera is modeled with a data structure,
having a position in x,y,z relative to world space, and two rotations (one around
the camera’s x axis, and one around the camera’s y axis).</p>
<p>To position the camera
you would</p>
<ol class="arabic simple">
<li><p>translate to the camera’s position, using the actual position values
of camera position in world space coordinates.</p></li>
<li><p>rotate around the local y axis</p></li>
<li><p>rotate around the local x axis</p></li>
</ol>
<p>To visualize this, run “python mvpVisualization/modelvieworthoprojection/modelvieworthoprojection.py”</p>
<p>The ordering of 1) before 2) and 3) should be clear, as
we are imagining a coordinate system that moves, just
like we do for the <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a> to world space transformations.
The ordering of 2) before 3) is very important, as two rotations
around different axes are not commutative, meaning that you can’t
change the order and still expect the same results
<a class="reference external" href="https://en.wikipedia.org/wiki/Commutative_property">https://en.wikipedia.org/wiki/Commutative_property</a>.</p>
<p>Try this.  Rotate your head to the right a little more that
45 degrees.  Now rotate your head back a little more than 45 degrees.</p>
<p>Now, reset your head (glPopMatrix, which we have not yet covered).
Try rotating your head back 45 degrees.  Once it is there,
rotate your head (not your neck), 45 degrees.  It is different, and quite uncomfortable!</p>
<p>We rotate the camera by the y axis first, then by the relative x axis,
for the same reason.</p>
<p>(Remember, read bottom up, just like the previous demos
for <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a> to world-space data)</p>
<p>Back to the point, we are envisioning the camera relative to the world
space by making a moving coordinate system (composed of an origin, 1 unit
in the “x” axis, 1 unit in the “y” axis, and 1 unit in the “z” axis), where
each subsequent transformation is relative to the previous coordinate system.
(This system is beneficial btw because it allows us to think of only one coordinate
system at a time, and allows us to forget how we got there, (similar to a Markov process,
<a class="reference external" href="https://en.wikipedia.org/wiki/Markov_chain">https://en.wikipedia.org/wiki/Markov_chain</a>))</p>
<p>But this system of thinking works only when we are placing the camera into
its position/orientation relative to world space, which is not what we need
to actually do.  We don’t need to place the camera.
We need to move every already-plotted object in world space towards the origin and
orientation of NDC.  Looking at the following graph,</p>
<figure class="align-center" id="id3">
<img alt="Demo 16" class="no-scale" src="images/demo161.png" />
<figcaption>
<p><span class="caption-text">Demo 16</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>We want to take the <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a> geometry from,
say Paddle1 space, to world space,
and then to camera space (which is going in the opposite direction of the arrow, therefore requires
an inverse operation, because to plot data we go from <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a> to screen space on the graph.</p>
<p>Given that the inverse of a sequence of transformations is the sequence backwards,
with each transformations inverted, we must do that to get from world space
to camera space.</p>
<p>Other things added
Added rotations around the x axis, y axis, and z axis.
<a class="reference external" href="https://en.wikipedia.org/wiki/Rotation_matrix">https://en.wikipedia.org/wiki/Rotation_matrix</a></p>
</section>
<section id="code">
<h2>Code<a class="headerlink" href="#code" title="Link to this heading">¶</a></h2>
<p>The camera now has two angles as instance variables.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo17.py</span><a class="headerlink" href="#id4" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">121</span>
<span class="linenos">122</span>
<span class="linenos">123</span><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
<span class="linenos">124</span><span class="k">class</span> <span class="nc">Camera</span><span class="p">:</span>
<span class="linenos">125</span>    <span class="n">position_ws</span><span class="p">:</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">Vector3D</span> <span class="o">=</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
<span class="linenos">126</span>        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">15.0</span><span class="p">)</span>
<span class="linenos">127</span>    <span class="p">)</span>
<span class="linenos">128</span>    <span class="n">rot_y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="linenos">129</span>    <span class="n">rot_x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
</div>
<p>Since we want the user to be able to control the camera, we need
to read the input.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo17.py</span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">147</span><span class="k">def</span> <span class="nf">handle_inputs</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</pre></div>
</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
</pre></div>
</div>
<p>Left and right rotate the viewer’s horizontal
angle, page up and page down the vertical angle.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo17.py</span><a class="headerlink" href="#id6" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">160</span>    <span class="k">if</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_RIGHT</span><span class="p">)</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
<span class="linenos">161</span>        <span class="n">camera</span><span class="o">.</span><span class="n">rot_y</span> <span class="o">-=</span> <span class="mf">0.03</span>
<span class="linenos">162</span>    <span class="k">if</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_LEFT</span><span class="p">)</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
<span class="linenos">163</span>        <span class="n">camera</span><span class="o">.</span><span class="n">rot_y</span> <span class="o">+=</span> <span class="mf">0.03</span>
<span class="linenos">164</span>    <span class="k">if</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_PAGE_UP</span><span class="p">)</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
<span class="linenos">165</span>        <span class="n">camera</span><span class="o">.</span><span class="n">rot_x</span> <span class="o">+=</span> <span class="mf">0.03</span>
<span class="linenos">166</span>    <span class="k">if</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_PAGE_DOWN</span><span class="p">)</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
<span class="linenos">167</span>        <span class="n">camera</span><span class="o">.</span><span class="n">rot_x</span> <span class="o">-=</span> <span class="mf">0.03</span>
</pre></div>
</div>
</div>
<p>The up arrow and down arrow make the user move forwards
and backwards.  Unlike the camera space to world space
transformation, here for movement code,
we don’t do the rotate around the x axis.  This is because
users expect to simulate walking on the ground, not flying
through the sky.  I.e, we want forward/backwards movement to happen relative
to the XZ plane at the camera’s position, not forward/backwards
movement relative to camera space.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo17.py</span><a class="headerlink" href="#id7" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">171</span>    <span class="k">if</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_UP</span><span class="p">)</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
<span class="linenos">172</span>        <span class="n">forwards_cs</span> <span class="o">=</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">z</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">)</span>
<span class="linenos">173</span>        <span class="n">forward_ws</span> <span class="o">=</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span>
<span class="linenos">174</span>            <span class="p">[</span><span class="n">mu3d</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">camera</span><span class="o">.</span><span class="n">position_ws</span><span class="p">),</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">rotate_y</span><span class="p">(</span><span class="n">camera</span><span class="o">.</span><span class="n">rot_y</span><span class="p">)]</span>
<span class="linenos">175</span>        <span class="p">)(</span><span class="n">forwards_cs</span><span class="p">)</span>
<span class="linenos">176</span>        <span class="n">camera</span><span class="o">.</span><span class="n">position_ws</span> <span class="o">=</span> <span class="n">forward_ws</span>
<span class="linenos">177</span>    <span class="k">if</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_DOWN</span><span class="p">)</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
<span class="linenos">178</span>        <span class="n">forwards_cs</span> <span class="o">=</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="linenos">179</span>        <span class="n">forward_ws</span> <span class="o">=</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span>
<span class="linenos">180</span>            <span class="p">[</span><span class="n">mu3d</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">camera</span><span class="o">.</span><span class="n">position_ws</span><span class="p">),</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">rotate_y</span><span class="p">(</span><span class="n">camera</span><span class="o">.</span><span class="n">rot_y</span><span class="p">)]</span>
<span class="linenos">181</span>        <span class="p">)(</span><span class="n">forwards_cs</span><span class="p">)</span>
<span class="linenos">182</span>        <span class="n">camera</span><span class="o">.</span><span class="n">position_ws</span> <span class="o">=</span> <span class="n">forward_ws</span>
</pre></div>
</div>
</div>
<p>Ortho is the function call that shrinks the viewable region
relative to camera space down to NDC, by moving the center of the rectangular
prism to the origin, and scaling by the inverse of the width, height, and depth
of the viewable region.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/mathutils3d.py</span><a class="headerlink" href="#id8" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">161</span><span class="k">def</span> <span class="nf">ortho</span><span class="p">(</span>
<span class="linenos">162</span>    <span class="n">left</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="linenos">163</span>    <span class="n">right</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="linenos">164</span>    <span class="n">bottom</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="linenos">165</span>    <span class="n">top</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="linenos">166</span>    <span class="n">near</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="linenos">167</span>    <span class="n">far</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="linenos">168</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mu</span><span class="o">.</span><span class="n">InvertibleFunction</span><span class="p">:</span>
<span class="linenos">169</span>    <span class="n">midpoint</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span>
<span class="linenos">170</span>        <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">left</span> <span class="o">+</span> <span class="n">right</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">(</span><span class="n">bottom</span> <span class="o">+</span> <span class="n">top</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">(</span><span class="n">near</span> <span class="o">+</span> <span class="n">far</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
<span class="linenos">171</span>    <span class="p">)</span>
<span class="linenos">172</span>    <span class="n">length_x</span><span class="p">:</span> <span class="nb">float</span>
<span class="linenos">173</span>    <span class="n">length_y</span><span class="p">:</span> <span class="nb">float</span>
<span class="linenos">174</span>    <span class="n">length_z</span><span class="p">:</span> <span class="nb">float</span>
<span class="linenos">175</span>    <span class="n">length_x</span><span class="p">,</span> <span class="n">length_y</span><span class="p">,</span> <span class="n">length_z</span> <span class="o">=</span> <span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">,</span> <span class="n">top</span> <span class="o">-</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">far</span> <span class="o">-</span> <span class="n">near</span>
<span class="linenos">176</span>
<span class="linenos">177</span>    <span class="n">fn</span> <span class="o">=</span> <span class="n">mu</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span>
<span class="linenos">178</span>        <span class="p">[</span>
<span class="linenos">179</span>            <span class="n">scale</span><span class="p">(</span>
<span class="linenos">180</span>                <span class="n">m_x</span><span class="o">=</span><span class="p">(</span><span class="mf">2.0</span> <span class="o">/</span> <span class="n">length_x</span><span class="p">),</span>
<span class="linenos">181</span>                <span class="n">m_y</span><span class="o">=</span><span class="p">(</span><span class="mf">2.0</span> <span class="o">/</span> <span class="n">length_y</span><span class="p">),</span>
<span class="linenos">182</span>                <span class="n">m_z</span><span class="o">=</span><span class="p">(</span><span class="mf">2.0</span> <span class="o">/</span> <span class="p">(</span><span class="o">-</span><span class="n">length_z</span><span class="p">)),</span>
<span class="linenos">183</span>            <span class="p">),</span>
<span class="linenos">184</span>            <span class="n">mu</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="o">-</span><span class="n">midpoint</span><span class="p">),</span>
<span class="linenos">185</span>        <span class="p">]</span>
<span class="linenos">186</span>    <span class="p">)</span>
<span class="linenos">187</span>
<span class="linenos">188</span>    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">vector</span><span class="p">:</span> <span class="n">mu</span><span class="o">.</span><span class="n">Vector</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mu</span><span class="o">.</span><span class="n">Vector</span><span class="p">:</span>
<span class="linenos">189</span>        <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span>
<span class="linenos">190</span>
<span class="linenos">191</span>    <span class="k">def</span> <span class="nf">f_inv</span><span class="p">(</span><span class="n">vector</span><span class="p">:</span> <span class="n">mu</span><span class="o">.</span><span class="n">Vector</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mu</span><span class="o">.</span><span class="n">Vector</span><span class="p">:</span>
<span class="linenos">192</span>        <span class="k">return</span> <span class="n">mu</span><span class="o">.</span><span class="n">inverse</span><span class="p">(</span><span class="n">fn</span><span class="p">)(</span><span class="n">vector</span><span class="p">)</span>
<span class="linenos">193</span>
<span class="linenos">194</span>    <span class="k">return</span> <span class="n">mu</span><span class="o">.</span><span class="n">InvertibleFunction</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">f_inv</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We will make a wrapper function camera_space_to_ndc_space_fn which
calls ortho, setting the size of the rectangular prism.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/mathutils3d.py</span><a class="headerlink" href="#id9" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">258</span><span class="k">def</span> <span class="nf">cs_to_ndc_space_fn</span><span class="p">(</span>
<span class="linenos">259</span>    <span class="n">vector</span><span class="p">:</span> <span class="n">Vector3D</span><span class="p">,</span>
<span class="linenos">260</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mu</span><span class="o">.</span><span class="n">InvertibleFunction</span><span class="p">:</span>
<span class="linenos">261</span>    <span class="k">return</span> <span class="n">perspective</span><span class="p">(</span>
<span class="linenos">262</span>        <span class="n">field_of_view</span><span class="o">=</span><span class="mf">45.0</span><span class="p">,</span> <span class="n">aspect_ratio</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">near_z</span><span class="o">=-</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">far_z</span><span class="o">=-</span><span class="mf">1000.0</span>
<span class="linenos">263</span>    <span class="p">)</span>
<span class="linenos">264</span>
<span class="linenos">265</span>
</pre></div>
</div>
</div>
<section id="event-loop">
<h3>Event Loop<a class="headerlink" href="#event-loop" title="Link to this heading">¶</a></h3>
<p>The amount of repetition in the code below in starting to get brutal,
as there’s too much detail to think about and retype out for every object
being drawn, and we’re only dealing with 3 objects.  The author
put this repetition into the book on purpose, so that when we
start using matrices later, the reader will fully appreciate what
matrices solve for us.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo17.py</span><a class="headerlink" href="#id10" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">211</span><span class="k">while</span> <span class="ow">not</span> <span class="n">glfw</span><span class="o">.</span><span class="n">window_should_close</span><span class="p">(</span><span class="n">window</span><span class="p">):</span>
</pre></div>
</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
</pre></div>
</div>
<p>the square should not be visible when hidden behind the paddle1,
as we did a translate by -10 in the z direction.</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo17.py</span><a class="headerlink" href="#id11" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">230</span>    <span class="c1"># cameraspace to NDC</span>
<span class="linenos">231</span>    <span class="k">with</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">push_transformation</span><span class="p">(</span>
<span class="linenos">232</span>        <span class="n">mu3d</span><span class="o">.</span><span class="n">ortho</span><span class="p">(</span>
<span class="linenos">233</span>            <span class="n">left</span><span class="o">=-</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=-</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">near</span><span class="o">=-</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">far</span><span class="o">=-</span><span class="mf">30.0</span>
<span class="linenos">234</span>        <span class="p">)</span>
<span class="linenos">235</span>    <span class="p">):</span>
<span class="linenos">236</span>        <span class="c1"># world space to camera space, which is mu3d.inverse of camera space to world space</span>
<span class="linenos">237</span>        <span class="k">with</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">push_transformation</span><span class="p">(</span>
<span class="linenos">238</span>            <span class="n">mu3d</span><span class="o">.</span><span class="n">inverse</span><span class="p">(</span>
<span class="linenos">239</span>                <span class="n">mu3d</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span>
<span class="linenos">240</span>                    <span class="p">[</span>
<span class="linenos">241</span>                        <span class="n">mu3d</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">camera</span><span class="o">.</span><span class="n">position_ws</span><span class="p">),</span>
<span class="linenos">242</span>                        <span class="n">mu3d</span><span class="o">.</span><span class="n">rotate_y</span><span class="p">(</span><span class="n">camera</span><span class="o">.</span><span class="n">rot_y</span><span class="p">),</span>
<span class="linenos">243</span>                        <span class="n">mu3d</span><span class="o">.</span><span class="n">rotate_x</span><span class="p">(</span><span class="n">camera</span><span class="o">.</span><span class="n">rot_x</span><span class="p">),</span>
<span class="linenos">244</span>                    <span class="p">]</span>
<span class="linenos">245</span>                <span class="p">)</span>
<span class="linenos">246</span>            <span class="p">)</span>
<span class="linenos">247</span>        <span class="p">):</span>
<span class="linenos">248</span>            <span class="c1"># paddle 1 space to world space</span>
<span class="linenos">249</span>            <span class="k">with</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">push_transformation</span><span class="p">(</span>
<span class="linenos">250</span>                <span class="n">mu3d</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span>
<span class="linenos">251</span>                    <span class="p">[</span>
<span class="linenos">252</span>                        <span class="n">mu3d</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">paddle1</span><span class="o">.</span><span class="n">position</span><span class="p">),</span>
<span class="linenos">253</span>                        <span class="n">mu3d</span><span class="o">.</span><span class="n">rotate_z</span><span class="p">(</span><span class="n">paddle1</span><span class="o">.</span><span class="n">rotation</span><span class="p">),</span>
<span class="linenos">254</span>                    <span class="p">]</span>
<span class="linenos">255</span>                <span class="p">)</span>
<span class="linenos">256</span>            <span class="p">):</span>
<span class="linenos">257</span>                <span class="n">GL</span><span class="o">.</span><span class="n">glColor3f</span><span class="p">(</span><span class="o">*</span><span class="nb">iter</span><span class="p">(</span><span class="n">paddle1</span><span class="o">.</span><span class="n">color</span><span class="p">))</span>
<span class="linenos">258</span>                <span class="n">GL</span><span class="o">.</span><span class="n">glBegin</span><span class="p">(</span><span class="n">GL</span><span class="o">.</span><span class="n">GL_QUADS</span><span class="p">)</span>
<span class="linenos">259</span>                <span class="k">for</span> <span class="n">p1_v_ms</span> <span class="ow">in</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">vertices</span><span class="p">:</span>
<span class="linenos">260</span>                    <span class="n">paddle1_vector_ndc</span> <span class="o">=</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">fn_stack</span><span class="o">.</span><span class="n">modelspace_to_ndc_fn</span><span class="p">()(</span>
<span class="linenos">261</span>                        <span class="n">p1_v_ms</span>
<span class="linenos">262</span>                    <span class="p">)</span>
<span class="linenos">263</span>                    <span class="n">GL</span><span class="o">.</span><span class="n">glVertex3f</span><span class="p">(</span>
<span class="linenos">264</span>                        <span class="n">paddle1_vector_ndc</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
<span class="linenos">265</span>                        <span class="n">paddle1_vector_ndc</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
<span class="linenos">266</span>                        <span class="n">paddle1_vector_ndc</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
<span class="linenos">267</span>                    <span class="p">)</span>
<span class="linenos">268</span>                <span class="n">GL</span><span class="o">.</span><span class="n">glEnd</span><span class="p">()</span>
<span class="linenos">269</span>
<span class="linenos">270</span>                <span class="c1"># square space to paddle 1 space</span>
<span class="linenos">271</span>                <span class="k">with</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">push_transformation</span><span class="p">(</span>
<span class="linenos">272</span>                    <span class="n">mu3d</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span>
<span class="linenos">273</span>                        <span class="p">[</span>
<span class="linenos">274</span>                            <span class="n">mu3d</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">mu3d</span><span class="o">.</span><span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">z</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">)),</span>
<span class="linenos">275</span>                            <span class="n">mu3d</span><span class="o">.</span><span class="n">rotate_z</span><span class="p">(</span><span class="n">rotation_around_paddle1</span><span class="p">),</span>
<span class="linenos">276</span>                            <span class="n">mu3d</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">mu3d</span><span class="o">.</span><span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)),</span>
<span class="linenos">277</span>                            <span class="n">mu3d</span><span class="o">.</span><span class="n">rotate_z</span><span class="p">(</span><span class="n">square_rotation</span><span class="p">),</span>
<span class="linenos">278</span>                        <span class="p">]</span>
<span class="linenos">279</span>                    <span class="p">)</span>
<span class="linenos">280</span>                <span class="p">):</span>
<span class="linenos">281</span>                    <span class="c1"># draw square</span>
<span class="linenos">282</span>                    <span class="n">GL</span><span class="o">.</span><span class="n">glColor3f</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="linenos">283</span>                    <span class="n">GL</span><span class="o">.</span><span class="n">glBegin</span><span class="p">(</span><span class="n">GL</span><span class="o">.</span><span class="n">GL_QUADS</span><span class="p">)</span>
<span class="linenos">284</span>                    <span class="k">for</span> <span class="n">ms</span> <span class="ow">in</span> <span class="n">square</span><span class="p">:</span>
<span class="linenos">285</span>                        <span class="n">square_vector_ndc</span> <span class="o">=</span> <span class="p">(</span>
<span class="linenos">286</span>                            <span class="n">mu3d</span><span class="o">.</span><span class="n">fn_stack</span><span class="o">.</span><span class="n">modelspace_to_ndc_fn</span><span class="p">()(</span><span class="n">ms</span><span class="p">)</span>
<span class="linenos">287</span>                        <span class="p">)</span>
<span class="linenos">288</span>                        <span class="n">GL</span><span class="o">.</span><span class="n">glVertex3f</span><span class="p">(</span>
<span class="linenos">289</span>                            <span class="n">square_vector_ndc</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
<span class="linenos">290</span>                            <span class="n">square_vector_ndc</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
<span class="linenos">291</span>                            <span class="n">square_vector_ndc</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
<span class="linenos">292</span>                        <span class="p">)</span>
<span class="linenos">293</span>                    <span class="n">GL</span><span class="o">.</span><span class="n">glEnd</span><span class="p">()</span>
<span class="linenos">294</span>
<span class="linenos">295</span>            <span class="c1"># paddle 2 space to world space</span>
<span class="linenos">296</span>            <span class="k">with</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">push_transformation</span><span class="p">(</span>
<span class="linenos">297</span>                <span class="n">mu3d</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span>
<span class="linenos">298</span>                    <span class="p">[</span>
<span class="linenos">299</span>                        <span class="n">mu3d</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">paddle2</span><span class="o">.</span><span class="n">position</span><span class="p">),</span>
<span class="linenos">300</span>                        <span class="n">mu3d</span><span class="o">.</span><span class="n">rotate_z</span><span class="p">(</span><span class="n">paddle2</span><span class="o">.</span><span class="n">rotation</span><span class="p">),</span>
<span class="linenos">301</span>                    <span class="p">]</span>
<span class="linenos">302</span>                <span class="p">)</span>
<span class="linenos">303</span>            <span class="p">):</span>
<span class="linenos">304</span>                <span class="c1"># draw paddle 2</span>
<span class="linenos">305</span>                <span class="n">GL</span><span class="o">.</span><span class="n">glColor3f</span><span class="p">(</span><span class="o">*</span><span class="nb">iter</span><span class="p">(</span><span class="n">paddle2</span><span class="o">.</span><span class="n">color</span><span class="p">))</span>
<span class="linenos">306</span>                <span class="n">GL</span><span class="o">.</span><span class="n">glBegin</span><span class="p">(</span><span class="n">GL</span><span class="o">.</span><span class="n">GL_QUADS</span><span class="p">)</span>
<span class="linenos">307</span>                <span class="k">for</span> <span class="n">p2_v_ms</span> <span class="ow">in</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">vertices</span><span class="p">:</span>
<span class="linenos">308</span>                    <span class="n">paddle2_vector_ndc</span> <span class="o">=</span> <span class="n">mu3d</span><span class="o">.</span><span class="n">fn_stack</span><span class="o">.</span><span class="n">modelspace_to_ndc_fn</span><span class="p">()(</span>
<span class="linenos">309</span>                        <span class="n">p2_v_ms</span>
<span class="linenos">310</span>                    <span class="p">)</span>
<span class="linenos">311</span>                    <span class="n">GL</span><span class="o">.</span><span class="n">glVertex3f</span><span class="p">(</span>
<span class="linenos">312</span>                        <span class="n">paddle2_vector_ndc</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
<span class="linenos">313</span>                        <span class="n">paddle2_vector_ndc</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
<span class="linenos">314</span>                        <span class="n">paddle2_vector_ndc</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
<span class="linenos">315</span>                    <span class="p">)</span>
<span class="linenos">316</span>                <span class="n">GL</span><span class="o">.</span><span class="n">glEnd</span><span class="p">()</span>
<span class="linenos">317</span>
<span class="linenos">318</span>    <span class="n">glfw</span><span class="o">.</span><span class="n">swap_buffers</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="ch18.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">3D Perspective - Demo 18</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="ch16.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Lambda Stack - Demo 16</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2020-2025, William Emerison Six
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Moving Camera in 3D Space - Demo 17</a><ul>
<li><a class="reference internal" href="#objective">Objective</a><ul>
<li><a class="reference internal" href="#problem-purposefully-put-in">Problem purposefully put in</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-execute">How to Execute</a></li>
<li><a class="reference internal" href="#move-the-paddles-using-the-keyboard">Move the Paddles using the Keyboard</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#code">Code</a><ul>
<li><a class="reference internal" href="#event-loop">Event Loop</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="static/documentation_options.js?v=e3a6060d"></script>
    <script src="static/doctools.js?v=9bcbadda"></script>
    <script src="static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>