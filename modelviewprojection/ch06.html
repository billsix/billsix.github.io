<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2025.07.19 -->
        <title>Modelspace - Demo 06 - Model View Projection 0.0.02 documentation</title>
      <link rel="stylesheet" type="text/css" href="static/pygments.css?v=acfd86a5" />
    <link rel="stylesheet" type="text/css" href="static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="static/custom.css?v=b6a38b70" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Model View Projection 0.0.02 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">Model View Projection 0.0.02 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch01.html">Opening a Window - Demo 01</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch02.html">Draw A Rectangle - Demo 02</a></li>
<li class="toctree-l1"><a class="reference internal" href="mathhomework1.html">Math Homework #1</a></li>
<li class="toctree-l1"><a class="reference internal" href="programmingproj1.html">Programming Project #1</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="sources/ch06.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="modelspace-demo-06">
<h1>Modelspace - Demo 06<a class="headerlink" href="#modelspace-demo-06" title="Link to this heading">¶</a></h1>
<section id="objective">
<h2>Objective<a class="headerlink" href="#objective" title="Link to this heading">¶</a></h2>
<p>Learn about <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a> <span class="target" id="index-0"></span>Modelspace.</p>
<figure class="align-center" id="id1">
<img alt="Demo 06" class="no-scale" src="images/demo06.png" />
<figcaption>
<p><span class="caption-text">Demo 06</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="how-to-execute">
<h2>How to Execute<a class="headerlink" href="#how-to-execute" title="Link to this heading">¶</a></h2>
<p>Load src/modelviewprojection/demo06.py in Spyder and hit the play button.</p>
</section>
<section id="move-the-paddles-using-the-keyboard">
<h2>Move the Paddles using the Keyboard<a class="headerlink" href="#move-the-paddles-using-the-keyboard" title="Link to this heading">¶</a></h2>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Keyboard Input</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>w</em></p></td>
<td><p>Move Left Paddle Up</p></td>
</tr>
<tr class="row-odd"><td><p><em>s</em></p></td>
<td><p>Move Left Paddle Down</p></td>
</tr>
<tr class="row-even"><td><p><em>k</em></p></td>
<td><p>Move Right Paddle Down</p></td>
</tr>
<tr class="row-odd"><td><p><em>i</em></p></td>
<td><p>Move Right Paddle Up</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="modelspace">
<h2>Modelspace<a class="headerlink" href="#modelspace" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="glossary.html#term-Normalized-Device-Coordinates"><span class="xref std std-term">NDC</span></a> are not a natural system of
numbers for use by humans.  Imagine that the paddles in the previous
chapters exist in real life, and are 2 meters wide and 6 meters tall.
The graphics programmer should be able to use those numbers directly;
they shouldn’t have to manually transform the distances into <a class="reference internal" href="glossary.html#term-Normalized-Device-Coordinates"><span class="xref std std-term">NDC</span></a>.</p>
<p>Whatever a convenient numbering system is (i.e. coordinate system) for modeling objects
is called <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a>.  Since a paddle has four corners, which corner should be at
the origin (0,0)?  If you don’t already know what you want at the origin, then
none of the corners should be; instead put the center of the object
at the origin (Because by putting the center of the object at the origin,
scaling and rotating the object are trivial, as shown in later chapters).</p>
<figure class="align-center" id="id2">
<img alt="Representing a Paddle using Modelspace" class="no-scale" src="images/modelspace.svg" />
<figcaption>
<p><span class="caption-text">Representing a Paddle using Modelspace</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p><a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a> - the coordinate system (origin plus axes), in which some object’s
vertices are defined.</p>
</section>
<section id="worldspace">
<h2>WorldSpace<a class="headerlink" href="#worldspace" title="Link to this heading">¶</a></h2>
<p>WorldSpace is a top-level space, independent of NDC, that we choose to use.  It is arbitrary.
If you were to model a racetrack for a racing game, the origin of WorldSpace may be the center of that racetrack.
If you were modeling our solar system, the center of the sun could be the origin of “WorldSpace”.
I personally would put the center of our flat earth at the origin, but reasonable people
can disagree.</p>
<p>For our demo with paddles, the author arbitrarily defines the WorldSpace to be 20 units wide, 20 units tall, with the origin at the center.</p>
<figure class="align-center" id="id3">
<img alt="Demo 06" class="no-scale" src="images/demo061.png" />
<figcaption>
<p><span class="caption-text">Demo 06</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="modelspace-to-worldspace">
<h2>Modelspace to WorldSpace<a class="headerlink" href="#modelspace-to-worldspace" title="Link to this heading">¶</a></h2>
<p>The author prefers to view transformations as changes to the graph paper,
as compared to view transformations as changes to points.</p>
<p>As such, for placing paddle1, we can view the translation as a change
to the graph paper relative to world space coordinates (only incidentally
bringing the vertices
along with it) and then resetting the graph paper (i.e. both origin and axes)
back to its original position and orientation.
Although we will think of the paddle’s vertices as relative to its own space
(i.e. -1 to 1 horizontally, -3 to 3 vertically),
we will not look at the numbers of what they are in world space coordinates,
as doing so</p>
<ul class="simple">
<li><p>Will not give us any insight</p></li>
<li><p>Will distract us from thinking clearly about what’s happening</p></li>
<li><p>As an example, figure out the world space coordinate of the upper rights
corner of the paddle after it has been translated, and ask yourself what
that means and what insight did you gain?</p></li>
</ul>
<p>The animation above shows multiple steps, shown now without animation.</p>
<section id="modelspace-of-paddle-1">
<h3>Modelspace of Paddle 1<a class="headerlink" href="#modelspace-of-paddle-1" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="id4">
<img alt="Paddle 1's Modelspace" class="no-scale" src="images/translation-forwards-0.svg" />
<figcaption>
<p><span class="caption-text">Paddle 1’s Modelspace</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Vector</p></th>
<th class="head"><p>Coordinates</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>(1,3)</p></td>
</tr>
<tr class="row-odd"><td><p>b</p></td>
<td><p>(-1,3)</p></td>
</tr>
<tr class="row-even"><td><p>c</p></td>
<td><p>(-1,-3)</p></td>
</tr>
<tr class="row-odd"><td><p>d</p></td>
<td><p>(1,-3)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="modelspace-of-paddle-1-superimposed-on-worldspace-after-the-translation">
<h3>Modelspace of Paddle 1 Superimposed on Worldspace after the translation<a class="headerlink" href="#modelspace-of-paddle-1-superimposed-on-worldspace-after-the-translation" title="Link to this heading">¶</a></h3>
<p>Paddle 1’s graph paper gets translated -9 units in the x direction, and some
number of units in the y direction, 0 during the first frame, based off of user input.  The origin
is translated, and the graph paper comes with it, onto which you can
plot the vertices.  Notice that the coordinate system labels below the plot and to the left of the plot
is unchanged.  That is world space, which has not changed.</p>
<figure class="align-center" id="id5">
<img alt="Paddle 1's Modelspace Superimposed on World Space" class="no-scale" src="images/translation-forwards-2.svg" />
<figcaption>
<p><span class="caption-text">Paddle 1’s Modelspace Superimposed on World Space</span><a class="headerlink" href="#id5" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Vector</p></th>
<th class="head"><p>Coordinates (modelspace)</p></th>
<th class="head"><p>Coordinates (worldspace)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>(1,3)</p></td>
<td><p>(1,3) + (9,3)  = (-8,5)</p></td>
</tr>
<tr class="row-odd"><td><p>b</p></td>
<td><p>(-1,3)</p></td>
<td><p>(-1,3) + (9,3)  = (-10,5)</p></td>
</tr>
<tr class="row-even"><td><p>c</p></td>
<td><p>(-1,-3)</p></td>
<td><p>(-1,-3) + (9,3)  = (-10,-1)</p></td>
</tr>
<tr class="row-odd"><td><p>d</p></td>
<td><p>(1,-3)</p></td>
<td><p>(1,-3) + (9,3) = (-8,-1)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="paddle-1-s-vertices-in-worldspace-coordinates">
<h3>Paddle 1’s vertices in WorldSpace Coordinates<a class="headerlink" href="#paddle-1-s-vertices-in-worldspace-coordinates" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="id6">
<img alt="Paddle 1's Vertices in World Space" class="no-scale" src="images/translation-forwards-3.svg" />
<figcaption>
<p><span class="caption-text">Paddle 1’s Vertices in World Space.</span><a class="headerlink" href="#id6" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Vector</p></th>
<th class="head"><p>Coordinates (worldspace)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>(-8,5)</p></td>
</tr>
<tr class="row-odd"><td><p>b</p></td>
<td><p>(-10,5)</p></td>
</tr>
<tr class="row-even"><td><p>c</p></td>
<td><p>(-10,-1)</p></td>
</tr>
<tr class="row-odd"><td><p>d</p></td>
<td><p>(-8,-1)</p></td>
</tr>
</tbody>
</table>
</div>
<p>Now that the transformation has happened, the vertices are all in world space.
You could calculate their values in world space, but that will not give you any insight.  The only numbers
that matter for insight as that the entire graph paper of <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a>, which originally
was the same as world space, has changed, bringing the vertices along with it.</p>
<p>Same goes for Paddle 2’s <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a>, relative to its translation, which
are different values.</p>
</section>
<section id="modelspace-of-paddle-2">
<h3>Modelspace of Paddle 2<a class="headerlink" href="#modelspace-of-paddle-2" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="id7">
<img alt="Paddle 1's Modelspace" class="no-scale" src="images/translation2-forwards-0.svg" />
<figcaption>
<p><span class="caption-text">Paddle 2’s Modelspace</span><a class="headerlink" href="#id7" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Vector</p></th>
<th class="head"><p>Coordinates</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>(1,3)</p></td>
</tr>
<tr class="row-odd"><td><p>b</p></td>
<td><p>(-1,3)</p></td>
</tr>
<tr class="row-even"><td><p>c</p></td>
<td><p>(-1,-3)</p></td>
</tr>
<tr class="row-odd"><td><p>d</p></td>
<td><p>(1,-3)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="modelspace-of-paddle-2-superimposed-on-worldspace-after-the-translation">
<h3>Modelspace of Paddle 2 Superimposed on Worldspace after the translation<a class="headerlink" href="#modelspace-of-paddle-2-superimposed-on-worldspace-after-the-translation" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="id8">
<img alt="Paddle 1's Modelspace Superimposed on World Space" class="no-scale" src="images/translation2-forwards-2.svg" />
<figcaption>
<p><span class="caption-text">Paddle 2’s Modelspace Superimposed on World Space</span><a class="headerlink" href="#id8" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Vector</p></th>
<th class="head"><p>Coordinates (modelspace)</p></th>
<th class="head"><p>Coordinates (worldspace)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>(1,3)</p></td>
<td><p>(1,3) + (9,-4) = (10,-1)</p></td>
</tr>
<tr class="row-odd"><td><p>b</p></td>
<td><p>(-1,3)</p></td>
<td><p>(-1,3) + (9,-4) = (8,-1)</p></td>
</tr>
<tr class="row-even"><td><p>c</p></td>
<td><p>(-1,-3)</p></td>
<td><p>(-1,-3) + (9,-4) = (8,-7)</p></td>
</tr>
<tr class="row-odd"><td><p>d</p></td>
<td><p>(1,-3)</p></td>
<td><p>(1,-3) + (9,-4) = (10,-7)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="paddle-2-s-vertices-in-worldspace-coordinates">
<h3>Paddle 2’s vertices in WorldSpace Coordinates<a class="headerlink" href="#paddle-2-s-vertices-in-worldspace-coordinates" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="id9">
<img alt="Paddle 1's Vertices in World Space" class="no-scale" src="images/translation2-forwards-3.svg" />
<figcaption>
<p><span class="caption-text">Paddle 2’s Vertices in World Space.</span><a class="headerlink" href="#id9" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Vector</p></th>
<th class="head"><p>Coordinates (worldspace)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>(10,-1)</p></td>
</tr>
<tr class="row-odd"><td><p>b</p></td>
<td><p>(8,-1)</p></td>
</tr>
<tr class="row-even"><td><p>c</p></td>
<td><p>(8,-7)</p></td>
</tr>
<tr class="row-odd"><td><p>d</p></td>
<td><p>(10,-7)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="scaling">
<h3>Scaling<a class="headerlink" href="#scaling" title="Link to this heading">¶</a></h3>
<p>Our paddles are now well outside of NDC, and as such, they would not
be displayed, as they would be <em>clipped</em> out.  Their values are outside
of -1.0 to 1.0.  All we will need to do to convert them from
world space to NDC is divide each component, x and y, by 10.</p>
<p>As a demonstration of how scaling works, let’s make an
object’s width twice as large, and height three times as large. (The author
tried doing the actual scaling of 1/10 in an animated gif, and it looked awful,
therefore a different scaling gif is showed here, but the concept
is the same).</p>
<p>We can expand or shrink the size of an object
by “scale”ing each component of the vertices by some coefficient.</p>
<figure class="align-center" id="id10">
<img alt="Modelspace" class="no-scale" src="images/scale-0.svg" />
<figcaption>
<p><span class="caption-text">Modelspace</span><a class="headerlink" href="#id10" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id11">
<img alt="Modelspace Superimposed on World Space" class="no-scale" src="images/scale-2.svg" />
<figcaption>
<p><span class="caption-text">Modelspace Superimposed on World Space</span><a class="headerlink" href="#id11" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id12">
<img alt="Worldspace" class="no-scale" src="images/scale-4.svg" />
<figcaption>
<p><span class="caption-text">Worldspace.  Don’t concern yourself with what the numbers are.</span><a class="headerlink" href="#id12" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Our global space is -10 to 10 in both dimensions,
and to get it into NDC, we need to scale by dividing by 10</p>
<figure class="align-center" id="id13">
<img alt="Demo 06" class="no-scale" src="images/demo061.png" />
<figcaption>
<p><span class="caption-text">Demo 06</span><a class="headerlink" href="#id13" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}\begin{bmatrix}
x_{w} \\
y_{w}
\end{bmatrix}  =
\vec{f}_{p1}^{w}(
\begin{bmatrix}
x_{p1} \\
y_{p1}
\end{bmatrix})  =
\begin{bmatrix}
x_{p1} \\
y_{p1}
\end{bmatrix} +
\begin{bmatrix}
{p1}_{x} \\
{p1}_{y}
\end{bmatrix}\end{split}\]</div>
</div>
<p>where x_p1, y_p1  are the <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a> coordinates of the paddle’s vertices,
and where p1_center_x_worldspace, p1_center_y_worldspace,
are the offset from the world space’s origin to the center of the paddle, i.e. the translation.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}\begin{bmatrix}
x_{w} \\
y_{w}
\end{bmatrix}  =
\vec{f}_{p2}^{w} (
\begin{bmatrix}
x_{p2} \\
y_{p2}
\end{bmatrix}) =
\begin{bmatrix}
x_{p2} \\
y_{p2}
\end{bmatrix} +
\begin{bmatrix}
{p2}_{x} \\
{p2}_{y}
\end{bmatrix}\end{split}\]</div>
</div>
<p>Now, the coordinates for paddle 1 and for paddle 2 are in world
space, and we need the match to take any world space coordinates
and convert them to NDC.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}\begin{bmatrix}
x_{ndc} \\
y_{ndc}
\end{bmatrix} =
\vec{f}_{w}^{ndc} (
\begin{bmatrix}
x_{w} \\
y_{w}
\end{bmatrix})  = 1/10 *
\begin{bmatrix}
x_{w} \\
y_{w}
\end{bmatrix}\end{split}\]</div>
</div>
<p>Modelviewprojection comes with a math library, the 2D version is
named “mathutils2d.py”.  The main class in this module is “Vector2D”,
which has two components: and x value, and a y value.  To add a vector2d
to another one on the right hand side of the ‘+’ symbol, we just add
the respective components together, and create a new Vector2D.</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/mathutils2d.py</span><a class="headerlink" href="#id14" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">31</span><span class="nd">@dataclass</span>
<span class="linenos">32</span><span class="k">class</span> <span class="nc">Vector2D</span><span class="p">:</span>
<span class="linenos">33</span>    <span class="n">x</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1">#: The x-component of the 2D Vector</span>
<span class="linenos">34</span>    <span class="n">y</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1">#: The y-component of the 2D Vector</span>
</pre></div>
</div>
</div>
<p>In a Python class, we can overload the ‘+’ symbol, to make
objects addable, by implementing the ‘__add__’ method.</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/mathutils2d.py</span><a class="headerlink" href="#id15" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">38</span>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">Vector2D</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vector2D</span><span class="p">:</span>
<span class="linenos">39</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">40</span><span class="sd">        Add together two Vector2Ds.</span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="sd">        Let :math:`\\vec{a} = \\begin{pmatrix} a_x \\\\ a_y \\end{pmatrix}`</span>
<span class="linenos">43</span><span class="sd">        and :math:`\\vec{b} = \\begin{pmatrix} b_x \\\\ b_y \\end{pmatrix}`:</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="sd">        .. math::</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="sd">             \\vec{a} + \\vec{b} = \\begin{pmatrix} a_x + b_x \\\\ a_y + b_y \\end{pmatrix}</span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="sd">        Args:</span>
<span class="linenos">50</span><span class="sd">            rhs (Vector2D): The vector on the right hand side of the addition</span>
<span class="linenos">51</span><span class="sd">                            symbol</span>
<span class="linenos">52</span><span class="sd">        Returns:</span>
<span class="linenos">53</span><span class="sd">            Vector2D: The Vector2D that represents the additon of the two</span>
<span class="linenos">54</span><span class="sd">                      input Vector2Ds</span>
<span class="linenos">55</span><span class="sd">        Raises:</span>
<span class="linenos">56</span><span class="sd">            Nothing</span>
<span class="linenos">57</span><span class="sd">        Example:</span>
<span class="linenos">58</span><span class="sd">            &gt;&gt;&gt; from modelviewprojection.mathutils2d import Vector2D</span>
<span class="linenos">59</span><span class="sd">            &gt;&gt;&gt; a = Vector2D(x=2.0, y=3.0)</span>
<span class="linenos">60</span><span class="sd">            &gt;&gt;&gt; b = Vector2D(x=5.0, y=6.0)</span>
<span class="linenos">61</span><span class="sd">            &gt;&gt;&gt; a + b</span>
<span class="linenos">62</span><span class="sd">            Vector2D(x=7.0, y=9.0)</span>
<span class="linenos">63</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">64</span>
<span class="linenos">65</span>        <span class="k">return</span> <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">rhs</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">rhs</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="linenos">66</span>
</pre></div>
</div>
</div>
<p>We can also model the opposite procedure, subtraction,
by implementing the “__sub__” method.</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/mathutils2d.py</span><a class="headerlink" href="#id16" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">70</span>    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">Vector2D</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vector2D</span><span class="p">:</span>
<span class="linenos">71</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">72</span><span class="sd">        Subtract the right hand side Vector2D from the left hand side Vector2D.</span>
<span class="linenos">73</span>
<span class="linenos">74</span><span class="sd">        Let :math:`\\vec{a} = \\begin{pmatrix} a_x \\\\ a_y \\end{pmatrix}`</span>
<span class="linenos">75</span><span class="sd">        and :math:`\\vec{b} = \\begin{pmatrix} b_x \\\\ b_y \\end{pmatrix}`:</span>
<span class="linenos">76</span>
<span class="linenos">77</span><span class="sd">        .. math::</span>
<span class="linenos">78</span>
<span class="linenos">79</span><span class="sd">             \\vec{a} - \\vec{b} = \\vec{a} + \\vec{b} = \\begin{pmatrix} a_x - b_x \\\\ a_y - b_y \\end{pmatrix}</span>
<span class="linenos">80</span>
<span class="linenos">81</span><span class="sd">        Args:</span>
<span class="linenos">82</span><span class="sd">            rhs (Vector2D): The vector on the right hand side of the</span>
<span class="linenos">83</span><span class="sd">                            subtraction symbol</span>
<span class="linenos">84</span><span class="sd">        Returns:</span>
<span class="linenos">85</span><span class="sd">            Vector2D: The Vector2D that represents the subtraction of the</span>
<span class="linenos">86</span><span class="sd">                      right hand side Vector2D from the left hand side</span>
<span class="linenos">87</span><span class="sd">                      Vector2D</span>
<span class="linenos">88</span><span class="sd">        Raises:</span>
<span class="linenos">89</span><span class="sd">            Nothing</span>
<span class="linenos">90</span><span class="sd">        Example:</span>
<span class="linenos">91</span><span class="sd">            &gt;&gt;&gt; from modelviewprojection.mathutils2d import Vector2D</span>
<span class="linenos">92</span><span class="sd">            &gt;&gt;&gt; a = Vector2D(x=2.0, y=3.0)</span>
<span class="linenos">93</span><span class="sd">            &gt;&gt;&gt; b = Vector2D(x=5.0, y=2.0)</span>
<span class="linenos">94</span><span class="sd">            &gt;&gt;&gt; a - b</span>
<span class="linenos">95</span><span class="sd">            Vector2D(x=-3.0, y=1.0)</span>
<span class="linenos">96</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">97</span>        <span class="k">return</span> <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">rhs</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">rhs</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="linenos">98</span>
</pre></div>
</div>
</div>
<p>In our graphics code, instead of using “a+b”, we’ll use a more descriptive
name: “translate”, which is implemented using the addition symbol.  But a few
things to note, “translate” is a function on the mathutils module, not a method
on Vector2D class, and it’s wrapped in a class named “InvertibleFunction”</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/mathutils2d.py</span><a class="headerlink" href="#id17" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">164</span><span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="n">translate_amount</span><span class="p">:</span> <span class="n">Vector2D</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">InvertibleFunction</span><span class="p">[</span><span class="n">Vector2D</span><span class="p">]:</span>
<span class="linenos">165</span>    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">vector</span><span class="p">:</span> <span class="n">Vector2D</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vector2D</span><span class="p">:</span>
<span class="linenos">166</span>        <span class="k">return</span> <span class="n">vector</span> <span class="o">+</span> <span class="n">translate_amount</span>
<span class="linenos">167</span>
<span class="linenos">168</span>    <span class="k">def</span> <span class="nf">f_inv</span><span class="p">(</span><span class="n">vector</span><span class="p">:</span> <span class="n">Vector2D</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vector2D</span><span class="p">:</span>
<span class="linenos">169</span>        <span class="k">return</span> <span class="n">vector</span> <span class="o">-</span> <span class="n">translate_amount</span>
<span class="linenos">170</span>
<span class="linenos">171</span>    <span class="k">return</span> <span class="n">InvertibleFunction</span><span class="p">[</span><span class="n">Vector2D</span><span class="p">](</span><span class="n">f</span><span class="p">,</span> <span class="n">f_inv</span><span class="p">)</span>
<span class="linenos">172</span>
<span class="linenos">173</span>
</pre></div>
</div>
</div>
<p>Notice in particular that the “translate_amount” parameter
is passed as an argument to “translate”,
but the function for translating, named “f”, and the inverse of “f” named “f_inv”, take a Vector2D.
This is because we will be translating many Vector2Ds using the same amount.</p>
<p>Invertible functions are stored in pairs, with the “active” function
being the first one passed to the constructor.  So for translate above,
the adding of the Vector2Ds will be the function, but InvertibleFunction
holds onto the second function, for later use to be able to undo the function’s
application.</p>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">tests/test_mathutils2d.py</span><a class="headerlink" href="#id18" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">115</span><span class="k">def</span> <span class="nf">test_translate</span><span class="p">():</span>
<span class="linenos">116</span>    <span class="n">fn</span><span class="p">:</span> <span class="n">InvertibleFunction</span><span class="p">[</span><span class="n">Vector2D</span><span class="p">]</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">3.0</span><span class="p">))</span>
<span class="linenos">117</span>    <span class="n">fn_inv</span><span class="p">:</span> <span class="n">InvertibleFunction</span><span class="p">[</span><span class="n">Vector2D</span><span class="p">]</span> <span class="o">=</span> <span class="n">inverse</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="linenos">118</span>
<span class="linenos">119</span>    <span class="n">input_output_pairs</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">120</span>        <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]],</span>
<span class="linenos">121</span>        <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]],</span>
<span class="linenos">122</span>        <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]],</span>
<span class="linenos">123</span>    <span class="p">]</span>
<span class="linenos">124</span>
<span class="linenos">125</span>    <span class="k">for</span> <span class="n">input_val</span><span class="p">,</span> <span class="n">output_val</span> <span class="ow">in</span> <span class="n">input_output_pairs</span><span class="p">:</span>
<span class="linenos">126</span>        <span class="n">wrap_vec2_test</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">input_val</span><span class="p">,</span> <span class="n">output_val</span><span class="p">)</span>
<span class="linenos">127</span>        <span class="n">wrap_vec2_test</span><span class="p">(</span><span class="n">fn_inv</span><span class="p">,</span> <span class="n">output_val</span><span class="p">,</span> <span class="n">input_val</span><span class="p">)</span>
<span class="linenos">128</span>
<span class="linenos">129</span>
</pre></div>
</div>
</div>
<p>The above is a unit test that shows how the translate function can be used.
We call “translate”, a function which takes a translate amount, both in the x
direction and the y direction, but we have not yet specified what needs to be translated
by that amount.  “translate” returns an InvertibleFunction, which is
Callable[Vector2D, Vector2D].  Callable[Vector2D, Vector2D] is a type which
is a function that takes a Vector2D as input, and returns a Vector2D (in this case,
the output is the input, translated by Vector2D(x=2.0, y=3.0).</p>
<p>On the next 3 lines, we call the function t, passing in a Vector2D to be translated, and
we test if the result is equal to the specified amount.  (“approx”, is a function from the
pytest module, which when tested for equality, returns true if the two floating point
numbers under comparison are “close enough”).</p>
<p>We then define a function t_inv, by calling “inverse” on function “t”.  We then see that
composing t_inv and t results in no transformation.</p>
<p>Here’s how InvertibleFunction is implemented:</p>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/mathutils.py</span><a class="headerlink" href="#id19" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 25</span><span class="c1"># Define a generic type variable</span>
<span class="linenos"> 26</span><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span>
<span class="linenos"> 27</span>
<span class="linenos"> 28</span>
<span class="linenos"> 29</span><span class="nd">@dataclass</span>
<span class="linenos"> 30</span><span class="k">class</span> <span class="nc">InvertibleFunction</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
<span class="linenos"> 31</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 32</span><span class="sd">    Class that wraps a function and its</span>
<span class="linenos"> 33</span><span class="sd">    inverse function.  The function takes</span>
<span class="linenos"> 34</span><span class="sd">    type T as it&#39;s argument and it&#39;s evaluation</span>
<span class="linenos"> 35</span><span class="sd">    results in a value of type T.</span>
<span class="linenos"> 36</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 37</span>
<span class="linenos"> 38</span>    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">T</span><span class="p">],</span> <span class="n">T</span><span class="p">]</span>  <span class="c1">#: The wrapped function</span>
<span class="linenos"> 39</span>    <span class="n">inverse</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">T</span><span class="p">],</span> <span class="n">T</span><span class="p">]</span>  <span class="c1">#: The inverse of the wrapped function</span>
<span class="linenos"> 40</span>
<span class="linenos"> 41</span>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="linenos"> 42</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 43</span><span class="sd">        Execute a function with the given value.</span>
<span class="linenos"> 44</span>
<span class="linenos"> 45</span><span class="sd">        Args:</span>
<span class="linenos"> 46</span><span class="sd">            func (Callable[[T], T]): A function that takes a value of type T</span>
<span class="linenos"> 47</span><span class="sd">                                     and returns a value of the same type T.</span>
<span class="linenos"> 48</span><span class="sd">            value (T): The input value to pass to the function</span>
<span class="linenos"> 49</span><span class="sd">        Returns:</span>
<span class="linenos"> 50</span><span class="sd">            T: The result of calling func(value). Will be the same type as the</span>
<span class="linenos"> 51</span><span class="sd">                input value.</span>
<span class="linenos"> 52</span><span class="sd">        Raises:</span>
<span class="linenos"> 53</span><span class="sd">            Nothing</span>
<span class="linenos"> 54</span><span class="sd">        Example:</span>
<span class="linenos"> 55</span><span class="sd">            &gt;&gt;&gt; from modelviewprojection.mathutils import InvertibleFunction</span>
<span class="linenos"> 56</span><span class="sd">            &gt;&gt;&gt; from modelviewprojection.mathutils import inverse</span>
<span class="linenos"> 57</span><span class="sd">            &gt;&gt;&gt; def f(x):</span>
<span class="linenos"> 58</span><span class="sd">            ...     return 2 + x</span>
<span class="linenos"> 59</span><span class="sd">            ...</span>
<span class="linenos"> 60</span><span class="sd">            &gt;&gt;&gt; def f_inv(x):</span>
<span class="linenos"> 61</span><span class="sd">            ...     return x - 2</span>
<span class="linenos"> 62</span><span class="sd">            ...</span>
<span class="linenos"> 63</span><span class="sd">            &gt;&gt;&gt; foo = InvertibleFunction(func=f, inverse=f_inv)</span>
<span class="linenos"> 64</span><span class="sd">            &gt;&gt;&gt; foo # doctest: +ELLIPSIS</span>
<span class="linenos"> 65</span><span class="sd">            InvertibleFunction(func=&lt;function f at 0x...&gt;, inverse=&lt;function f_inv at 0x...&gt;)</span>
<span class="linenos"> 66</span><span class="sd">            &gt;&gt;&gt; foo(5)</span>
<span class="linenos"> 67</span><span class="sd">            7</span>
<span class="linenos"> 68</span><span class="sd">            &gt;&gt;&gt; inverse(foo) # doctest: +ELLIPSIS</span>
<span class="linenos"> 69</span><span class="sd">            InvertibleFunction(func=&lt;function f_inv at 0x...&gt;, inverse=&lt;function f at 0x...&gt;)</span>
<span class="linenos"> 70</span><span class="sd">            &gt;&gt;&gt; inverse(foo)(foo(5))</span>
<span class="linenos"> 71</span><span class="sd">            5</span>
<span class="linenos"> 72</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos"> 73</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="linenos"> 74</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="n">InvertibleFunction</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">InvertibleFunction</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
<span class="linenos"> 77</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 78</span><span class="sd">    Get the inverse of the InvertibleFunction</span>
<span class="linenos"> 79</span>
<span class="linenos"> 80</span><span class="sd">    Args:</span>
<span class="linenos"> 81</span><span class="sd">        f: InvertibleFunction[T]: A function with it&#39;s associated inverse</span>
<span class="linenos"> 82</span><span class="sd">           function.</span>
<span class="linenos"> 83</span><span class="sd">    Returns:</span>
<span class="linenos"> 84</span><span class="sd">        InvertibleFunction[T]: The Inverse of the function</span>
<span class="linenos"> 85</span><span class="sd">           function.</span>
<span class="linenos"> 86</span><span class="sd">    Raises:</span>
<span class="linenos"> 87</span><span class="sd">        Nothing</span>
<span class="linenos"> 88</span><span class="sd">    Example:</span>
<span class="linenos"> 89</span><span class="sd">        &gt;&gt;&gt; from modelviewprojection.mathutils import InvertibleFunction</span>
<span class="linenos"> 90</span><span class="sd">        &gt;&gt;&gt; from modelviewprojection.mathutils import inverse</span>
<span class="linenos"> 91</span><span class="sd">        &gt;&gt;&gt; def f(x):</span>
<span class="linenos"> 92</span><span class="sd">        ...     return 2 + x</span>
<span class="linenos"> 93</span><span class="sd">        ...</span>
<span class="linenos"> 94</span><span class="sd">        &gt;&gt;&gt; def f_inv(x):</span>
<span class="linenos"> 95</span><span class="sd">        ...     return x - 2</span>
<span class="linenos"> 96</span><span class="sd">        ...</span>
<span class="linenos"> 97</span><span class="sd">        &gt;&gt;&gt; foo = InvertibleFunction(func=f, inverse=f_inv)</span>
<span class="linenos"> 98</span><span class="sd">        &gt;&gt;&gt; foo # doctest: +ELLIPSIS</span>
<span class="linenos"> 99</span><span class="sd">        InvertibleFunction(func=&lt;function f at 0x...&gt;, inverse=&lt;function f_inv at 0x...&gt;)</span>
<span class="linenos">100</span><span class="sd">        &gt;&gt;&gt; foo(5)</span>
<span class="linenos">101</span><span class="sd">        7</span>
<span class="linenos">102</span><span class="sd">        &gt;&gt;&gt; inverse(foo) # doctest: +ELLIPSIS</span>
<span class="linenos">103</span><span class="sd">        InvertibleFunction(func=&lt;function f_inv at 0x...&gt;, inverse=&lt;function f at 0x...&gt;)</span>
<span class="linenos">104</span><span class="sd">        &gt;&gt;&gt; inverse(foo)(foo(5))</span>
<span class="linenos">105</span><span class="sd">        5</span>
<span class="linenos">106</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">107</span>
<span class="linenos">108</span>    <span class="k">return</span> <span class="n">InvertibleFunction</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">inverse</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">func</span><span class="p">)</span>
<span class="linenos">109</span>
<span class="linenos">110</span>
</pre></div>
</div>
</div>
<p>Just as Python allows an object to override the ‘+’ and ‘-’ syntax,
in Python, any object can be treated as a function, by implementing the
“__call__” method</p>
<p>Back to method’s on the Vector2D class.  We can also define scaling of a Vector2D,
by implementing multiplication of Vector2D’s by a scalar, meaning a real number
that scaled the Vector2D by the same amount in all directions.  We do this
by implementing the ‘__mul__’ and ‘__rmul__’ methods, where __rmul__ just means
that this object is on the right hand side of the multiplication.</p>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/mathutils2d.py</span><a class="headerlink" href="#id20" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">102</span>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vector2D</span><span class="p">:</span>
<span class="linenos">103</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">104</span><span class="sd">        Multiply the Vector2D by a scalar number</span>
<span class="linenos">105</span>
<span class="linenos">106</span><span class="sd">        Let :math:`\\vec{a} = \\begin{pmatrix} a_x \\\\ a_y \\end{pmatrix}` and constant scalar :math:`s`:</span>
<span class="linenos">107</span>
<span class="linenos">108</span><span class="sd">        .. math::</span>
<span class="linenos">109</span>
<span class="linenos">110</span><span class="sd">             s*\\vec{a} = \\begin{pmatrix} s*a_x \\\\ s*a_y \\end{pmatrix}</span>
<span class="linenos">111</span>
<span class="linenos">112</span><span class="sd">        Args:</span>
<span class="linenos">113</span><span class="sd">            rhs (Vector2D): The scalar to be multiplied to the Vector&#39;s component</span>
<span class="linenos">114</span><span class="sd">                            subtraction symbol</span>
<span class="linenos">115</span><span class="sd">        Returns:</span>
<span class="linenos">116</span><span class="sd">            Vector2D: The Vector2D that represents scalar times the amount of the input Vector2D</span>
<span class="linenos">117</span>
<span class="linenos">118</span><span class="sd">        Raises:</span>
<span class="linenos">119</span><span class="sd">            Nothing</span>
<span class="linenos">120</span><span class="sd">        Example:</span>
<span class="linenos">121</span><span class="sd">            &gt;&gt;&gt; from modelviewprojection.mathutils2d import Vector2D</span>
<span class="linenos">122</span><span class="sd">            &gt;&gt;&gt; a = Vector2D(x=2.0, y=3.0)</span>
<span class="linenos">123</span><span class="sd">            &gt;&gt;&gt; a * 4</span>
<span class="linenos">124</span><span class="sd">            Vector2D(x=8.0, y=12.0)</span>
<span class="linenos">125</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">126</span>        <span class="k">return</span> <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">scalar</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">scalar</span><span class="p">))</span>
<span class="linenos">127</span>
<span class="linenos">128</span>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vector2D</span><span class="p">:</span>
<span class="linenos">129</span>        <span class="k">return</span> <span class="bp">self</span> <span class="o">*</span> <span class="n">scalar</span>
<span class="linenos">130</span>
</pre></div>
</div>
</div>
<p>Just like we made a top level invertible function called “translate” for addition,
we are going to do the same for multiplication, and call it “uniform_scale”.
Notice in particular that the scalar is passed as an argument to “uniform_scale”,
but the function for scaling “f”, and the inverse of “f” named “f_inv”, take a Vector2D.
This is because we will be scaling many Vector2Ds using the same scaling factor.</p>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/mathutils2d.py</span><a class="headerlink" href="#id21" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">178</span><span class="k">def</span> <span class="nf">uniform_scale</span><span class="p">(</span><span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">InvertibleFunction</span><span class="p">[</span><span class="n">Vector2D</span><span class="p">]:</span>
<span class="linenos">179</span>    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">vector</span><span class="p">:</span> <span class="n">Vector2D</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vector2D</span><span class="p">:</span>
<span class="linenos">180</span>        <span class="k">return</span> <span class="n">vector</span> <span class="o">*</span> <span class="n">scalar</span>
<span class="linenos">181</span>
<span class="linenos">182</span>    <span class="k">def</span> <span class="nf">f_inv</span><span class="p">(</span><span class="n">vector</span><span class="p">:</span> <span class="n">Vector2D</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vector2D</span><span class="p">:</span>
<span class="linenos">183</span>        <span class="k">if</span> <span class="n">scalar</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">184</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Note invertible.  Scaling factor cannot be zero.&quot;</span><span class="p">)</span>
<span class="linenos">185</span>
<span class="linenos">186</span>        <span class="k">return</span> <span class="n">vector</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">scalar</span><span class="p">)</span>
<span class="linenos">187</span>
<span class="linenos">188</span>    <span class="k">return</span> <span class="n">InvertibleFunction</span><span class="p">[</span><span class="n">Vector2D</span><span class="p">](</span><span class="n">f</span><span class="p">,</span> <span class="n">f_inv</span><span class="p">)</span>
<span class="linenos">189</span>
<span class="linenos">190</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>NEW – Add the ability to scale a vector, to stretch or to shrink</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo06.py</span><a class="headerlink" href="#id22" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">119</span><span class="n">paddle1</span><span class="p">:</span> <span class="n">Paddle</span> <span class="o">=</span> <span class="n">Paddle</span><span class="p">(</span>
<span class="linenos">120</span>    <span class="n">vertices</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">121</span>        <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">3.0</span><span class="p">),</span>
<span class="linenos">122</span>        <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">3.0</span><span class="p">),</span>
<span class="linenos">123</span>        <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">3.0</span><span class="p">),</span>
<span class="linenos">124</span>        <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">3.0</span><span class="p">),</span>
<span class="linenos">125</span>    <span class="p">],</span>
<span class="linenos">126</span>    <span class="n">color</span><span class="o">=</span><span class="n">Color3</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mf">0.578123</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">1.0</span><span class="p">),</span>
<span class="linenos">127</span>    <span class="n">position</span><span class="o">=</span><span class="n">Vector2D</span><span class="p">(</span><span class="o">-</span><span class="mf">9.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
<span class="linenos">128</span><span class="p">)</span>
<span class="linenos">129</span>
<span class="linenos">130</span><span class="n">paddle2</span><span class="p">:</span> <span class="n">Paddle</span> <span class="o">=</span> <span class="n">Paddle</span><span class="p">(</span>
<span class="linenos">131</span>    <span class="n">vertices</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">132</span>        <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">3.0</span><span class="p">),</span>
<span class="linenos">133</span>        <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">3.0</span><span class="p">),</span>
<span class="linenos">134</span>        <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">3.0</span><span class="p">),</span>
<span class="linenos">135</span>        <span class="n">Vector2D</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">3.0</span><span class="p">),</span>
<span class="linenos">136</span>    <span class="p">],</span>
<span class="linenos">137</span>    <span class="n">color</span><span class="o">=</span><span class="n">Color3</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
<span class="linenos">138</span>    <span class="n">position</span><span class="o">=</span><span class="n">Vector2D</span><span class="p">(</span><span class="mf">9.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
<span class="linenos">139</span><span class="p">)</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>paddles are using <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a> coordinates instead of NDC</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo06.py</span><a class="headerlink" href="#id23" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">144</span><span class="k">def</span> <span class="nf">handle_movement_of_paddles</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">145</span>    <span class="k">global</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span>
<span class="linenos">146</span>
<span class="linenos">147</span>    <span class="k">if</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_S</span><span class="p">)</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
<span class="linenos">148</span>        <span class="n">paddle1</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mf">1.0</span>
<span class="linenos">149</span>    <span class="k">if</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_W</span><span class="p">)</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
<span class="linenos">150</span>        <span class="n">paddle1</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mf">1.0</span>
<span class="linenos">151</span>    <span class="k">if</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_K</span><span class="p">)</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
<span class="linenos">152</span>        <span class="n">paddle2</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mf">1.0</span>
<span class="linenos">153</span>    <span class="k">if</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_I</span><span class="p">)</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
<span class="linenos">154</span>        <span class="n">paddle2</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mf">1.0</span>
<span class="linenos">155</span>
<span class="linenos">156</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>Movement code needs to happen in <a class="reference internal" href="glossary.html#term-Modelspace"><span class="xref std std-term">modelspace</span></a>’s units.</p></li>
</ul>
</section>
</section>
<section id="code">
<h2>Code<a class="headerlink" href="#code" title="Link to this heading">¶</a></h2>
<section id="the-event-loop">
<h3>The Event Loop<a class="headerlink" href="#the-event-loop" title="Link to this heading">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo06.py</span><a class="headerlink" href="#id24" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">164</span><span class="k">while</span> <span class="ow">not</span> <span class="n">glfw</span><span class="o">.</span><span class="n">window_should_close</span><span class="p">(</span><span class="n">window</span><span class="p">):</span>
<span class="linenos">165</span>    <span class="k">while</span> <span class="p">(</span>
<span class="linenos">166</span>        <span class="n">glfw</span><span class="o">.</span><span class="n">get_time</span><span class="p">()</span>
<span class="linenos">167</span>        <span class="o">&lt;</span> <span class="n">time_at_beginning_of_previous_frame</span> <span class="o">+</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">TARGET_FRAMERATE</span>
<span class="linenos">168</span>    <span class="p">):</span>
<span class="linenos">169</span>        <span class="k">pass</span>
<span class="linenos">170</span>    <span class="n">time_at_beginning_of_previous_frame</span> <span class="o">=</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_time</span><span class="p">()</span>
<span class="linenos">171</span>
<span class="linenos">172</span>    <span class="n">glfw</span><span class="o">.</span><span class="n">poll_events</span><span class="p">()</span>
<span class="linenos">173</span>
<span class="linenos">174</span>    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_framebuffer_size</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
<span class="linenos">175</span>    <span class="n">glViewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
<span class="linenos">176</span>    <span class="n">glClear</span><span class="p">(</span><span class="n">GL_COLOR_BUFFER_BIT</span> <span class="o">|</span> <span class="n">GL_DEPTH_BUFFER_BIT</span><span class="p">)</span>
<span class="linenos">177</span>
<span class="linenos">178</span>    <span class="n">draw_in_square_viewport</span><span class="p">()</span>
<span class="linenos">179</span>    <span class="n">handle_movement_of_paddles</span><span class="p">()</span>
</pre></div>
</div>
</div>
<section id="rendering-paddle-1">
<h4>Rendering Paddle 1<a class="headerlink" href="#rendering-paddle-1" title="Link to this heading">¶</a></h4>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo06.py</span><a class="headerlink" href="#id25" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">184</span>    <span class="n">glColor3f</span><span class="p">(</span><span class="o">*</span><span class="n">astuple</span><span class="p">(</span><span class="n">paddle1</span><span class="o">.</span><span class="n">color</span><span class="p">))</span>
<span class="linenos">185</span>
<span class="linenos">186</span>    <span class="n">glBegin</span><span class="p">(</span><span class="n">GL_QUADS</span><span class="p">)</span>
<span class="linenos">187</span>    <span class="k">for</span> <span class="n">p1_v_ms</span> <span class="ow">in</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">vertices</span><span class="p">:</span>
<span class="linenos">188</span>        <span class="n">fn</span><span class="p">:</span> <span class="n">InvertibleFunction</span><span class="p">[</span><span class="n">Vector2D</span><span class="p">]</span> <span class="o">=</span> <span class="n">compose</span><span class="p">(</span>
<span class="linenos">189</span>            <span class="n">uniform_scale</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mf">10.0</span><span class="p">),</span>
<span class="linenos">190</span>            <span class="n">translate</span><span class="p">(</span><span class="n">paddle1</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
<span class="linenos">191</span>        <span class="p">)</span>
<span class="linenos">192</span>        <span class="n">paddle1_vector_ndc</span><span class="p">:</span> <span class="n">Vector2D</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">p1_v_ms</span><span class="p">)</span>
<span class="linenos">193</span>        <span class="n">glVertex2f</span><span class="p">(</span><span class="n">paddle1_vector_ndc</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
<span class="linenos">194</span>                   <span class="n">paddle1_vector_ndc</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="linenos">195</span>
<span class="linenos">196</span>    <span class="n">glEnd</span><span class="p">()</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id26">
<img alt="Paddle 1's Modelspace" class="no-scale" src="images/translation-forwards-0.svg" />
<figcaption>
<p><span class="caption-text">Paddle 1’s Modelspace</span><a class="headerlink" href="#id26" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id27">
<img alt="Paddle 1's Modelspace Superimposed on World Space" class="no-scale" src="images/translation-forwards-2.svg" />
<figcaption>
<p><span class="caption-text">Paddle 1’s Modelspace Superimposed on World Space</span><a class="headerlink" href="#id27" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id28">
<img alt="Paddle 1's Modelspace Superimposed on World Space" class="no-scale" src="images/translation-forwards-3.svg" />
<figcaption>
<p><span class="caption-text">Reset coordinate system.</span><a class="headerlink" href="#id28" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The coordinate system now resets back to the coordinate system specified
on the left and below.
Now, we must scale everything by 1/10.  I have
not included a picture of that here.  Scaling happens relative to
the origin, so the picture would be the same, just with different labels
on the bottom and on the left.</p>
</section>
<section id="rendering-paddle-2">
<h4>Rendering Paddle 2<a class="headerlink" href="#rendering-paddle-2" title="Link to this heading">¶</a></h4>
<div class="literal-block-wrapper docutils container" id="id29">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo06.py</span><a class="headerlink" href="#id29" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">200</span>    <span class="n">glColor3f</span><span class="p">(</span><span class="o">*</span><span class="n">astuple</span><span class="p">(</span><span class="n">paddle2</span><span class="o">.</span><span class="n">color</span><span class="p">))</span>
<span class="linenos">201</span>
<span class="linenos">202</span>
<span class="linenos">203</span>    <span class="n">glBegin</span><span class="p">(</span><span class="n">GL_QUADS</span><span class="p">)</span>
<span class="linenos">204</span>    <span class="k">for</span> <span class="n">p2_v_ms</span> <span class="ow">in</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">vertices</span><span class="p">:</span>
<span class="linenos">205</span>        <span class="n">fn</span><span class="p">:</span> <span class="n">InvertibleFunction</span><span class="p">[</span><span class="n">Vector2D</span><span class="p">]</span> <span class="o">=</span> <span class="n">compose</span><span class="p">(</span>
<span class="linenos">206</span>            <span class="n">uniform_scale</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mf">10.0</span><span class="p">),</span>
<span class="linenos">207</span>            <span class="n">translate</span><span class="p">(</span><span class="n">paddle2</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
<span class="linenos">208</span>        <span class="p">)</span>
<span class="linenos">209</span>        <span class="n">paddle2_vector_ndc</span><span class="p">:</span> <span class="n">Vector2D</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">p2_v_ms</span><span class="p">)</span>
<span class="linenos">210</span>        <span class="n">glVertex2f</span><span class="p">(</span><span class="n">paddle2_vector_ndc</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
<span class="linenos">211</span>                   <span class="n">paddle2_vector_ndc</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="linenos">212</span>    <span class="n">glEnd</span><span class="p">()</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id30">
<img alt="Paddle 2's Modelspace" class="no-scale" src="images/translation2-forwards-0.svg" />
<figcaption>
<p><span class="caption-text">Paddle 2’s Modelspace</span><a class="headerlink" href="#id30" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id31">
<img alt="Paddle 2's Modelspace Superimposed on World Space" class="no-scale" src="images/translation2-forwards-2.svg" />
<figcaption>
<p><span class="caption-text">Paddle 2’s Modelspace Superimposed on World Space</span><a class="headerlink" href="#id31" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id32">
<img alt="Paddle 2's Modelspace Superimposed on World Space" class="no-scale" src="images/translation2-forwards-3.svg" />
<figcaption>
<p><span class="caption-text">Reset coordinate system.</span><a class="headerlink" href="#id32" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The coordinate system is reset.  Now scale everything by 1/10.  I have
not included a picture of that here.  Scaling happens relative to
the origin, so the picture would be the same, just with different labels
on the bottom and on the left.</p>
<div class="literal-block-wrapper docutils container" id="id33">
<div class="code-block-caption"><span class="caption-text">src/modelviewprojection/demo06.py</span><a class="headerlink" href="#id33" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">217</span>    <span class="n">glfw</span><span class="o">.</span><span class="n">swap_buffers</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2020-2025, William Emerison Six
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Modelspace - Demo 06</a><ul>
<li><a class="reference internal" href="#objective">Objective</a></li>
<li><a class="reference internal" href="#how-to-execute">How to Execute</a></li>
<li><a class="reference internal" href="#move-the-paddles-using-the-keyboard">Move the Paddles using the Keyboard</a></li>
<li><a class="reference internal" href="#modelspace">Modelspace</a></li>
<li><a class="reference internal" href="#worldspace">WorldSpace</a></li>
<li><a class="reference internal" href="#modelspace-to-worldspace">Modelspace to WorldSpace</a><ul>
<li><a class="reference internal" href="#modelspace-of-paddle-1">Modelspace of Paddle 1</a></li>
<li><a class="reference internal" href="#modelspace-of-paddle-1-superimposed-on-worldspace-after-the-translation">Modelspace of Paddle 1 Superimposed on Worldspace after the translation</a></li>
<li><a class="reference internal" href="#paddle-1-s-vertices-in-worldspace-coordinates">Paddle 1’s vertices in WorldSpace Coordinates</a></li>
<li><a class="reference internal" href="#modelspace-of-paddle-2">Modelspace of Paddle 2</a></li>
<li><a class="reference internal" href="#modelspace-of-paddle-2-superimposed-on-worldspace-after-the-translation">Modelspace of Paddle 2 Superimposed on Worldspace after the translation</a></li>
<li><a class="reference internal" href="#paddle-2-s-vertices-in-worldspace-coordinates">Paddle 2’s vertices in WorldSpace Coordinates</a></li>
<li><a class="reference internal" href="#scaling">Scaling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#code">Code</a><ul>
<li><a class="reference internal" href="#the-event-loop">The Event Loop</a><ul>
<li><a class="reference internal" href="#rendering-paddle-1">Rendering Paddle 1</a></li>
<li><a class="reference internal" href="#rendering-paddle-2">Rendering Paddle 2</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="static/documentation_options.js?v=5f733c1d"></script>
    <script src="static/doctools.js?v=9bcbadda"></script>
    <script src="static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="static/scripts/furo.js?v=46bd48cc"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "displayMath": [["$$", "$$"], ["\\[", "\\]"]]}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>