<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 8.6.10">
<title>Model View Projection</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


/*
 * Theme specific overrides of the preceding (asciidoc.css) CSS.
 *
 */
body {
  font-family: Garamond, Georgia, serif;
  font-size: 17px;
  color: #3E4349;
  line-height: 1.3em;
}
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Garmond, Georgia, serif;
  font-weight: normal;
  border-bottom-width: 0;
  color: #3E4349;
}
div.title, caption.title { color: #596673; font-weight: bold; }
h1 { font-size: 240%; }
h2 { font-size: 180%; }
h3 { font-size: 150%; }
h4 { font-size: 130%; }
h5 { font-size: 115%; }
h6 { font-size: 100%; }
#header h1 { margin-top: 0; }
#toc {
  color: #444444;
  line-height: 1.5;
  padding-top: 1.5em;
}
#toctitle {
  font-size: 20px;
}
#toc a {
    border-bottom: 1px dotted #999999;
    color: #444444 !important;
    text-decoration: none !important;
}
#toc a:hover {
    border-bottom: 1px solid #6D4100;
    color: #6D4100 !important;
    text-decoration: none !important;
}
div.toclevel1 { margin-top: 0.2em; font-size: 16px; }
div.toclevel2 { margin-top: 0.15em; font-size: 14px; }
em, dt, td.hdlist1 { color: black; }
strong { color: #3E4349; }
a { color: #004B6B; text-decoration: none; border-bottom: 1px dotted #004B6B; }
a:visited { color: #615FA0; border-bottom: 1px dotted #615FA0; }
a:hover { color: #6D4100; border-bottom: 1px solid #6D4100; }
div.tableblock > table, table.tableblock { border: 3px solid #E8E8E8; }
th.tableblock, td.tableblock { border: 1px solid #E8E8E8; }
ul > li > * { color: #3E4349; }
pre, tt, .monospaced { font-family: Consolas,Menlo,'Deja Vu Sans Mono','Bitstream Vera Sans Mono',monospace; }
tt, .monospaced { font-size: 0.9em; color: black;
}
div.exampleblock > div.content, div.sidebarblock > div.content, div.listingblock > div.content { border-width: 0 0 0 3px; border-color: #E8E8E8; }
div.verseblock { border-left-width: 0; margin-left: 3em; }
div.quoteblock { border-left-width: 3px; margin-left: 0; margin-right: 0;}
div.admonitionblock td.content { border-left: 3px solid #E8E8E8; }


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>Model View Projection</h1>
<span id="author">Bill Six &lt;billsix@gmail.com&gt;</span><br>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_dedication"> Dedication</h2>
<div class="sectionbody">
<div class="paragraph"><p>To Teresa, Liam, Adam, and Kate.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"> Preface</h2>
<div class="sectionbody">
<div class="paragraph"><p>"I had no idea how much math was involved in computer graphics."</p></div>
<div class="paragraph"><p>Unfortunately many students of computer graphics have the impression
that the writing of computer graphics programs requires knowledge of
advanced math; which is patently untrue.
Only the understanding of high-school level geometry is required.
Using math you already know, this book builds both 2D and 3D
applications from the ground up using OpenGL, a standard for graphics
programming.</p></div>
<div class="paragraph"><p>Thoughout the book, I show how to place objects in space,
how to draw objects relative to other objects, how to add a
camera which moves over time based on user input, and how to transform all
the objects into the 2D pixel coordinates
of the computer screen.  By the end of this book, you will understand the basics of
how to create first-person
and third-person applications/games.  I made this book to show programmers
how to make the kind
of graphics programs which they want to make, using
math they aleady know.</p></div>
<div class="paragraph"><p>This book is purposely limited in scope, and
the applications produced are not particurly pretty nor realistic-looking.
For advanced graphics topics, you&#8217;ll need to consult other references,
such as the OpenGL "red book" and "blue book".
Although this book fills a huge gap that other books do not address,
those other books are excellent reference books for advanced topics.</p></div>
</div>
</div>
<h1 id="intro">Introduction</h1>
<div class="sect1">
<h2 id="_copyright">1. Copyright</h2>
<div class="sectionbody">
<div class="paragraph"><p>&#169; 2017-2018, William Emerison Six. The source, and the generated book, are free under the MIT licence</p></div>
</div>
</div>
<div class="sect1">
<h2 id="basics">2. Basics</h2>
<div class="sectionbody">
<div class="paragraph"><p>The device attached to a computer which displays information to the user is called a <strong>monitor</strong>.
The monitor is composed of a two-dimensional array of light-emitting elements, each called a <strong>pixel</strong>.
At a given time, each individual pixel is instructed to display
one specific color, represented within the computer as a number.
The aggregate of the colors at each pixel at one moment in time, called a <strong>frame</strong>,
provides a picture that has some meaning to the human user.</p></div>
<div class="paragraph"><p>In OpenGL, the bottom left pixel of a window is coordinate (0,0).  The top right is (window_width,window_height)</p></div>
<div class="paragraph"><div class="title">1024x768 monitor</div><p><span class="image">
<img src="monitor.png" alt="monitor.png" title="Foo">
</span></p></div>
<div class="paragraph"><div class="title">1920x1200 monitor</div><p><span class="image">
<img src="monitor2.png" alt="monitor2.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>Frames are created within the computer and sent to the monitor
at a rate over time, called the <strong>framerate</strong>,
measured in <strong>Hertz</strong>.  By updating frames quickly and at a constant rate, the computer
provides the end-user with the illusion of motion.</p></div>
<div class="paragraph"><p>TODO - insert 3 20x20 frames which show motion</p></div>
<div class="sect2">
<h3 id="openWindow">2.1. Opening a Window</h3>
<div class="paragraph"><p>Desktop operating systems allow the user to run more than one
program at a time, where each program draws into a subsect of
the monitor called a window.</p></div>
<div class="paragraph"><p>To create and to open a window in a cross-platform manner, this
book will call procedures provided by the widely-ported GLFW library (supporting Windows, macOS, Linux).
GLFW also provides procedures for receiving
keyboard input and for controller input<span class="footnote"><br>[tested with a wired XBox 360 controller]<br></span>.</p></div>
<div class="paragraph"><p>Much of the code listed from here until section<a href="#the-event-loop">[the-event-loop]</a> will be of little interest upon first reading.
As such, the reader may choose to skip ahead to section<a href="#the-event-loop">[the-event-loop]</a> now.</p></div>
<div class="paragraph"><p>The code for the entire book is available at <a href="https://github.com/billsix/modelviewprojection">https://github.com/billsix/modelviewprojection</a>,
contained within "mvp/modelviewprojection.py". The code and the contents of the book are licenced
using the open-source MIT license.</p></div>
<div class="sect3">
<h4 id="_include_headers">2.1.1. Include Headers</h4>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> sys
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> os
<span style="color: #000000">    3:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> numpy as np
<span style="color: #000000">    4:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> math
<span style="color: #000000">    5:</span> <span style="font-weight: bold"><span style="color: #000080">from</span></span> OpenGL<span style="color: #990000">.</span>GL <span style="font-weight: bold"><span style="color: #000080">import</span></span> <span style="color: #990000">*</span>
<span style="color: #000000">    6:</span> <span style="font-weight: bold"><span style="color: #000080">from</span></span> glfw<span style="color: #990000">.</span>glfw <span style="font-weight: bold"><span style="color: #000080">import</span></span> <span style="color: #990000">*</span>
<span style="color: #000000">    7:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> ctypes
<span style="color: #000000">    8:</span>
<span style="color: #000000">    9:</span>
<span style="color: #000000">   10:</span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> __name__ <span style="color: #990000">!=</span> <span style="color: #FF0000">'__main__'</span><span style="color: #990000">:</span>
<span style="color: #000000">   11:</span>     sys<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">exit</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">)</span>
<span style="color: #000000">   12:</span>
<span style="color: #000000">   13:</span> <span style="font-weight: bold"><span style="color: #0000FF">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Which Chapter would you like to execute?"</span><span style="color: #990000">)</span>
<span style="color: #000000">   14:</span> chapterNumber <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">input</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   15:</span>
<span style="color: #000000">   16:</span>  TODO <span style="color: #990000">-</span> explain these decorators <span style="font-weight: bold"><span style="color: #0000FF">or</span></span> move them somewhere <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">   17:</span> <span style="font-style: italic"><span style="color: #9A1900"># - if the user selected this demo, then run it now.</span></span>
<span style="color: #000000">   18:</span> <span style="font-style: italic"><span style="color: #9A1900"># this way, overridden/updated functions do not affect this</span></span>
<span style="color: #000000">   19:</span> <span style="font-style: italic"><span style="color: #9A1900"># demo</span></span>
<span style="color: #000000">   20:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span>theDemoNumber<span style="color: #990000">):</span>
<span style="color: #000000">   21:</span>     <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">actualDecorator</span></span><span style="color: #990000">(</span>F<span style="color: #990000">):</span>
<span style="color: #000000">   22:</span>         <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">int</span></span><span style="color: #990000">(</span>chapterNumber<span style="color: #990000">)</span> <span style="color: #990000">==</span> theDemoNumber<span style="color: #990000">:</span>
<span style="color: #000000">   23:</span>             <span style="font-weight: bold"><span style="color: #0000FF">global</span></span> render_scene
<span style="color: #000000">   24:</span>             render_scene <span style="color: #990000">=</span> F
<span style="color: #000000">   25:</span>             <span style="font-weight: bold"><span style="color: #000000">main_loop</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   26:</span>             sys<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">exit</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">   27:</span>         <span style="font-weight: bold"><span style="color: #0000FF">else</span></span><span style="color: #990000">:</span>
<span style="color: #000000">   28:</span>             <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> F
<span style="color: #000000">   29:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> actualDecorator</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_glfw_opengl_initialization">2.1.2. GLFW/OpenGL Initialization</h4>
<div class="paragraph"><p>-Initialize GLFW.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #0000FF">not</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwInit</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    2:</span>     sys<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">exit</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="paragraph"><p>One frame is created incrementally over time on the CPU, but the frame
is sent to the monitor
only when frame is completely drawn, and each pixel has a color.
The act of sending the frame to the monitor is called <strong>flushing</strong>
the frame.
Flushing takes time,
and if the call to flush were to block<span class="footnote"><br>[meaning it would not return control back to the call-ing procedure until the flush is complete]<br></span>, we would
have wasted CPU time.  To avoid this,
OpenGL has two *framebuffers*<span class="footnote"><br>[regions of memory which will eventually contain the full data for a frame]<br></span>,
only one of which is "active", or writable, at a given time.
"glfwSwapBuffers" is a non-blocking call which initiates the flushing
the current buffer, and which switches the current writable framebuffer to the
other one, thus allowing the CPU to resume.</p></div>
<div class="paragraph"><p>-Set the version of OpenGL</p></div>
<div class="paragraph"><p>OpenGL has been around a long time, and has multiple, possibly incompatible versions.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #000000">glfwWindowHint</span></span><span style="color: #990000">(</span>GLFW_CONTEXT_VERSION_MAJOR<span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">)</span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #000000">glfwWindowHint</span></span><span style="color: #990000">(</span>GLFW_CONTEXT_VERSION_MINOR<span style="color: #990000">,</span><span style="color: #993399">4</span><span style="color: #990000">)</span></tt></pre></div></div>
<div class="paragraph"><p>Create a 500 pixel by 500 pixel window, which the user can resize.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> window <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">glfwCreateWindow</span></span><span style="color: #990000">(</span><span style="color: #993399">500</span><span style="color: #990000">,</span>
<span style="color: #000000">    2:</span>                           <span style="color: #993399">500</span><span style="color: #990000">,</span>
<span style="color: #000000">    3:</span>                           str<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">encode</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"pyNuklear demo - GLFW OpenGL2"</span><span style="color: #990000">),</span>
<span style="color: #000000">    4:</span>                           None<span style="color: #990000">,</span>
<span style="color: #000000">    5:</span>                           None<span style="color: #990000">)</span>
<span style="color: #000000">    6:</span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #0000FF">not</span></span> window<span style="color: #990000">:</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #000000">glfwTerminate</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    8:</span>     sys<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">exit</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-style: italic"><span style="color: #9A1900"># Make the window's context current</span></span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #000000">glfwMakeContextCurrent</span></span><span style="color: #990000">(</span>window<span style="color: #990000">)</span>
<span style="color: #000000">    3:</span>
<span style="color: #000000">    4:</span> <span style="font-style: italic"><span style="color: #9A1900"># Install a key handler</span></span>
<span style="color: #000000">    5:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">on_key</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> key<span style="color: #990000">,</span> scancode<span style="color: #990000">,</span> action<span style="color: #990000">,</span> mods<span style="color: #990000">):</span>
<span style="color: #000000">    6:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> key <span style="color: #990000">==</span> GLFW_KEY_ESCAPE <span style="font-weight: bold"><span style="color: #0000FF">and</span></span> action <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    7:</span>         <span style="font-weight: bold"><span style="color: #000000">glfwSetWindowShouldClose</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">)</span>
<span style="color: #000000">    8:</span> <span style="font-weight: bold"><span style="color: #000000">glfwSetKeyCallback</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> on_key<span style="color: #990000">)</span></tt></pre></div></div>
<div class="paragraph"><p>For every frame drawn, each pixel has a default color, set by
calling "glClearColor". "0,0,0,1", means black "0,0,0", without
transparency (the "1").</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #000000">glClearColor</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">    2:</span>              <span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">    3:</span>              <span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">    4:</span>              <span style="color: #993399">1.0</span><span style="color: #990000">)</span></tt></pre></div></div>
<div class="paragraph"><p>Set the default depth for all fragments</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #000000">glClearDepth</span></span><span style="color: #990000">(-</span><span style="color: #993399">1.0</span><span style="color: #990000">)</span></tt></pre></div></div>
<div class="paragraph"><p>Set the depth test for all fragments.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #000000">glDepthFunc</span></span><span style="color: #990000">(</span>GL_GREATER<span style="color: #990000">)</span></tt></pre></div></div>
<div class="paragraph"><p>Enable blending of new values in a fragment with the old value.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #000000">glEnable</span></span><span style="color: #990000">(</span>GL_BLEND<span style="color: #990000">)</span></tt></pre></div></div>
<div class="paragraph"><p>Specify how a given fragment&#8217;s color value within the framebuffer combines with a second color.  This new
blended value is then set for the fragment.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #000000">glBlendFunc</span></span><span style="color: #990000">(</span>GL_SRC_ALPHA<span style="color: #990000">,</span>
<span style="color: #000000">    2:</span>             GL_ONE_MINUS_SRC_ALPHA<span style="color: #990000">)</span>
<span style="color: #000000">    3:</span> <span style="font-weight: bold"><span style="color: #000000">glEnable</span></span><span style="color: #990000">(</span>GL_DEPTH_TEST<span style="color: #990000">)</span>
<span style="color: #000000">    4:</span>
<span style="color: #000000">    5:</span> <span style="font-weight: bold"><span style="color: #000000">glMatrixMode</span></span><span style="color: #990000">(</span>GL_PROJECTION<span style="color: #990000">);</span>
<span style="color: #000000">    6:</span> <span style="font-weight: bold"><span style="color: #000000">glLoadIdentity</span></span><span style="color: #990000">();</span>
<span style="color: #000000">    7:</span> <span style="font-weight: bold"><span style="color: #000000">glMatrixMode</span></span><span style="color: #990000">(</span>GL_MODELVIEW<span style="color: #990000">);</span>
<span style="color: #000000">    8:</span> <span style="font-weight: bold"><span style="color: #000000">glLoadIdentity</span></span><span style="color: #990000">();</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="the-event-loop">2.1.3. The Event Loop</h4>
<div class="paragraph"><p>When you pause a movie, motion stops and you see one picture.
Movies are composed of sequence of pictures, when
rendered in quick succession, provide the illusion of motion.</p></div>
<div class="paragraph"><p>Interactive computer graphics are rendered the same way,
one "frame" at a time.</p></div>
<div class="paragraph"><p>Render a frame for the user-selected demo, flush the complete frame to the monitor.
Unless the user closed the window, repeat indefinitely.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">main_loop</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    2:</span>     <span style="font-style: italic"><span style="color: #9A1900"># Loop until the user closes the window</span></span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="font-weight: bold"><span style="color: #0000FF">not</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwWindowShouldClose</span></span><span style="color: #990000">(</span>window<span style="color: #990000">):</span>
<span style="color: #000000">    4:</span>         <span style="font-style: italic"><span style="color: #9A1900"># Poll for and process events</span></span>
<span style="color: #000000">    5:</span>         <span style="font-weight: bold"><span style="color: #000000">glfwPollEvents</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    6:</span>
<span style="color: #000000">    7:</span>         width<span style="color: #990000">,</span> height <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">glfwGetFramebufferSize</span></span><span style="color: #990000">(</span>window<span style="color: #990000">)</span>
<span style="color: #000000">    8:</span>         <span style="font-weight: bold"><span style="color: #000000">glViewport</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> width<span style="color: #990000">,</span> height<span style="color: #990000">)</span>
<span style="color: #000000">    9:</span>         <span style="font-weight: bold"><span style="color: #000000">glClear</span></span><span style="color: #990000">(</span>GL_COLOR_BUFFER_BIT <span style="color: #990000">|</span> GL_DEPTH_BUFFER_BIT<span style="color: #990000">)</span></tt></pre></div></div>
<div class="paragraph"><p>Regardless of which demo will be run, certain things need
to happen every frame.  The color of each pixel withith
the current framebuffer
is reset to a default color.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span>         <span style="font-style: italic"><span style="color: #9A1900"># currently undefined, but will be before the event loop is called</span></span>
<span style="color: #000000">    2:</span>         <span style="font-weight: bold"><span style="color: #000000">render_scene</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span>         <span style="font-style: italic"><span style="color: #9A1900"># done with frame, flush and swap buffers</span></span>
<span style="color: #000000">    2:</span>         <span style="font-style: italic"><span style="color: #9A1900"># Swap front and back buffers</span></span>
<span style="color: #000000">    3:</span>         <span style="font-weight: bold"><span style="color: #000000">glfwSwapBuffers</span></span><span style="color: #990000">(</span>window<span style="color: #990000">)</span>
<span style="color: #000000">    4:</span>
<span style="color: #000000">    5:</span>     <span style="font-weight: bold"><span style="color: #000000">glfwTerminate</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="paragraph"><p>When a graphics application is executing, it is creating new
frames (pictures) at some rate (e.g. 60 frames per second).  At any given
frame, the user of the application might do something, (e.g.
move the mouse, click, type on the keyboard, close the application).</p></div>
<div class="paragraph"><p>At the beginning of every frame, ask OpenGL if it received one
of these events since we last asked (i.e., the previous frame).</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_black_screen">3. Black Screen</h2>
<div class="sectionbody">
<div class="paragraph"><p>To understand the material of this book well, the reader is advised to
execute the demos.  To do so, the source
code for this book may be obtained at <a href="https://github.com/billsix/modelviewprojection">https://github.com/billsix/modelviewprojection</a>.
It has been tested on macOS and on Linux.  Install Python3 and NumPy.</p></div>
<div class="paragraph"><p>Add the "mvp" direction to your PYTHONPATH, and type
"python modelviewprojection.py". When prompted, type "1" and then press the "Enter" key.</p></div>
<div class="paragraph"><p>The first demo is the least interesting graphical program possible.</p></div>
<div class="paragraph"><p>The event loop, defined in section <a href="#the-event-loop">[the-event-loop]</a>, executes a few procedures
before calling the current procedure.</p></div>
<div class="paragraph"><p>-Sets the color at every pixel black.  (A constant color is better than whatever
color happened to be the previous time it was drawn.)</p></div>
<div class="paragraph"><p>-If the user resized the window, reset OpenGL&#8217;s mappings from <strong>normalized-device-coordinates</strong>
to <strong>screen-coordinates</strong>.</p></div>
<div class="paragraph"><p>-Cleared the depth buffer (don&#8217;t worry about this for now).</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">)</span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo1</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    3:</span>     <span style="font-style: italic"><span style="color: #9A1900"># The baseline behavior.  A black screen.</span></span>
<span style="color: #000000">    4:</span>     <span style="font-weight: bold"><span style="color: #0000FF">pass</span></span></tt></pre></div></div>
<div class="paragraph"><p>When this code returns, the event loop flushes (i.e) sends the frame to the monitor.  Since
no geometry was drawn, the color value for each pixel is still black.</p></div>
<div class="paragraph"><p>Each color is represented by a number, so the frame is something like this:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb</pre>
</div></div>
<div class="paragraph"><p>The event loop then calls this code over and over again, and since we retain no state and
we draw nothing, a black screen will be displayed every frame until the user
closes the window, and says to himself, "why did I buy Doom 3"?</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_draw_paddles">4. Draw Paddles</h2>
<div class="sectionbody">
<div class="paragraph"><p>A black screen is not particularly interesting, so
let&#8217;s draw something, say, two rectangles.
Where should they be, and what color should they be?</p></div>
<div class="paragraph"><p>"glColor3f" sets a global variable, which makes it the color to be used
for the subsequently-drawn graphical shape.  The background will be black,
so lets make the first paddle purple, and a second paddle red.</p></div>
<div class="paragraph"><p>"glBegin(GL_QUADS)" tells OpenGL that we will soon specify 4 <strong>vertices</strong>,
(i.e. points) which define the
quadrilateral.  The vertices will be specified by calling "glVertex2f" 4 times.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">)</span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo2</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    3:</span>     <span style="font-style: italic"><span style="color: #9A1900"># draw paddle 1</span></span>
<span style="color: #000000">    4:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span><span style="color: #993399">0.578123</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#r</span></span>
<span style="color: #000000">    5:</span>               <span style="color: #993399">0.0</span><span style="color: #990000">,</span>      <span style="font-style: italic"><span style="color: #9A1900">#g</span></span>
<span style="color: #000000">    6:</span>               <span style="color: #993399">1.0</span><span style="color: #990000">)</span>      <span style="font-style: italic"><span style="color: #9A1900">#b</span></span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">    8:</span>     <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(-</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#x</span></span>
<span style="color: #000000">    9:</span>                <span style="color: #990000">-</span><span style="color: #993399">0.3</span><span style="color: #990000">)</span> <span style="font-style: italic"><span style="color: #9A1900">#y</span></span>
<span style="color: #000000">   10:</span>     <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(-</span><span style="color: #993399">0.8</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#x</span></span>
<span style="color: #000000">   11:</span>                <span style="color: #990000">-</span><span style="color: #993399">0.3</span><span style="color: #990000">)</span> <span style="font-style: italic"><span style="color: #9A1900">#y</span></span>
<span style="color: #000000">   12:</span>     <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(-</span><span style="color: #993399">0.8</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#x</span></span>
<span style="color: #000000">   13:</span>                <span style="color: #993399">0.3</span><span style="color: #990000">)</span>  <span style="font-style: italic"><span style="color: #9A1900">#y</span></span>
<span style="color: #000000">   14:</span>     <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(-</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#x</span></span>
<span style="color: #000000">   15:</span>                <span style="color: #993399">0.3</span><span style="color: #990000">)</span>  <span style="font-style: italic"><span style="color: #9A1900">#y</span></span>
<span style="color: #000000">   16:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="paragraph"><p>"glEnd()" tells OpenGL that we have finished providing vertices for
the begun quadrilateral.</p></div>
<div class="paragraph"><p>The framebuffer, which has not yet been flushed to the monitor, has geometry which looks like this:</p></div>
<div class="paragraph"><p><span class="image">
<img src="plot1.png" alt="plot1.png" title="Foo">
</span></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span>     <span style="font-style: italic"><span style="color: #9A1900"># draw paddle 2</span></span>
<span style="color: #000000">    2:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span>
<span style="color: #000000">    3:</span>               <span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">    4:</span>               <span style="color: #993399">0.0</span><span style="color: #990000">)</span>
<span style="color: #000000">    5:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">    6:</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span><span style="color: #993399">0.8</span><span style="color: #990000">,</span>
<span style="color: #000000">    8:</span>                <span style="color: #990000">-</span><span style="color: #993399">0.3</span><span style="color: #990000">)</span>
<span style="color: #000000">    9:</span>     <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   10:</span>                <span style="color: #990000">-</span><span style="color: #993399">0.3</span><span style="color: #990000">)</span>
<span style="color: #000000">   11:</span>     <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   12:</span>                <span style="color: #993399">0.3</span><span style="color: #990000">)</span>
<span style="color: #000000">   13:</span>     <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span><span style="color: #993399">0.8</span><span style="color: #990000">,</span>
<span style="color: #000000">   14:</span>                <span style="color: #993399">0.3</span><span style="color: #990000">)</span>
<span style="color: #000000">   15:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="paragraph"><p>The framebuffer, which has not yet been flushed to the monitor, has geometry which looks like this:</p></div>
<div class="paragraph"><p><span class="image">
<img src="plot2.png" alt="plot2.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>The frame sent to the monitor is a set of values like this:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
wwwwwbbbbbbbbbbbbbbbbbbbbbbbbbbbyyyyy
wwwwwbbbbbbbbbbbbbbbbbbbbbbbbbbbyyyyy
wwwwwbbbbbbbbbbbbbbbbbbbbbbbbbbbyyyyy
wwwwwbbbbbbbbbbbbbbbbbbbbbbbbbbbyyyyy
wwwwwbbbbbbbbbbbbbbbbbbbbbbbbbbbyyyyy
wwwwwbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb</pre>
</div></div>
<div class="paragraph"><p>What do we have to do to convert from normalized-device-coordinates
into individual colors for each pixel?  Nothing, OpenGL does that for us; therefore
we never have to think in terms of pixels, only in terms of vertices of shapes,
specified by normalized-device-coordinates.</p></div>
<div class="paragraph"><p>Why is that desirable?</p></div>
<div class="sect2">
<h3 id="_normalized_device_coordinates">4.1. Normalized-Device-Coordinates</h3>
<div class="paragraph"><p>The author owns two monitors, one which has 1024x768 pixels, and one which has
1920x1200 pixels.  When he purchases a game from Steam, he expects that his game
will run correctly on either monitor, in full-screen mode.  If a graphics programmer
had to explictly set each indiviual pixel&#8217;s color, the the programmer would have to
program using "screen-space"<span class="footnote"><br>[Any "space" means a system of numbers which you&#8217;re using.
Screen-space means you&#8217;re specifically using pixel coordinates, i.e, set pixel (5,10) to be red]<br></span>.</p></div>
<div class="paragraph"><p>What looks alright is screen-space on a large monitor&#8230;</p></div>
<div class="paragraph"><p><span class="image">
<img src="screenspace2.png" alt="screenspace2.png" title="Programming using Screen Space on Large Monitor">
</span></p></div>
<div class="paragraph"><p>isn&#8217;t even the same picture on a smaller monitor.</p></div>
<div class="paragraph"><p><span class="image">
<img src="screenspace.png" alt="screenspace.png" title="Programming using Screen Space on Small Monitor">
</span></p></div>
<div class="paragraph"><p>Like any good program or library, OpenGL abstracts over screen-space, thus freeing the
programmer from caring about screen size.  If a programmer does not want to program
in discrete<span class="footnote"><br>[discrete means integer values, not continuous]<br></span> screen-space,
what type of numbers should he use?  Firstly, it should be a continuous space, meaning
that it should be in decimal numbers.  Because if a real-world object is 10.3 meters long, a programmer
should be able to enter "float foo = 10.3".  Secondly, it should be a fixed range vertically
and an fixed range horizontally.  OpenGL will have to convert points from some space to screen-space,
and since OpenGL does this in hardware (i.e. you can&#8217;t programmatically change how the conversion
happens), it should be a fixed size.</p></div>
<div class="paragraph"><p>OpenGL uses <strong>normalized-device-coordinates</strong> <span class="footnote"><br>[normalized- meaning a distance value of
1; device- the monitor; coordinates- the system of numbers (i.e. space) in which you are working]<br></span>,
which is a continous space from -1.0 to 1.0 horizontally,
and -1.0 to 1.0 vertically.</p></div>
<div class="paragraph"><p>By specifying geometry using normalized-device-coordinates,
OpenGL will automatically convert from a continuous, -1.0 to 1.0 space,
to discrete pixel-space.</p></div>
<div class="paragraph"><p><span class="image">
<img src="ndcSpace.png" alt="ndcSpace.png" title="Programming using Screen Space on Large Monitor">
</span></p></div>
<div class="paragraph"><p>Whether we own a small monitor</p></div>
<div class="paragraph"><p><span class="image">
<img src="ndcSpace1.png" alt="ndcSpace1.png" title="Programming using Screen Space on Small Monitor">
</span></p></div>
<div class="paragraph"><p>or a large monitor.</p></div>
<div class="paragraph"><p><span class="image">
<img src="screenspace2.png" alt="screenspace2.png" title="Programming using Screen Space on Large Monitor">
</span></p></div>
<div class="paragraph"><p>-Exercise 1.  The window is resizable by the user while it runs.
Do the paddles both  still appear in the window if you make it really thin?  What if
you make it very wide?</p></div>
<div class="paragraph"><p>Answer - (Regardless of the window&#8217;s width to height ratio, the pixel in the upper left of
the window still maps to normalized-device-coordinate (-1.0,-1.0), and the pixel
in the bottom right of the window still maps to (1.0,1.0).</p></div>
<div class="paragraph"><p>-Exercise 2.  How would you convert from ndc-space to screen-space, given
a monitor width <em>w</em> and height <em>h</em>?</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keeping_the_paddles_proportional">5. Keeping the Paddles Proportional</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_create_procedure_to_ensure_proportionality">5.1. Create procedure to ensure proportionality</h3>
<div class="paragraph"><p>In the previous chapter, if the user resized the window, the paddles looked bad,
as they were shrunk in one direction if the window became too thin or too fat.</p></div>
<div class="paragraph"><p><span class="image">
<img src="disproportionate1.png" alt="disproportionate1.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="disproportionate2.png" alt="disproportionate2.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>Assume that this is a problem for the application we are making.  What
would a solution be?  Ideally, we would like to draw our paddles with
a black background within a square region in the center of the window, regardless of the dimensions
of the window.</p></div>
<div class="paragraph"><p>OpenGL has a solution for us.  The <strong>viewport</strong> is a rectangular region
within the window into which OpenGL will render.  The normalized-device-coordinates
will therefore resolve to the sub-screen space of the viewport, instead of the whole
window.</p></div>
<div class="paragraph"><p><span class="image">
<img src="viewport.png" alt="viewport.png" title="Programming using Screen Space on Large Monitor">
</span></p></div>
<div class="paragraph"><p>Because we will only draw in a subset of the window, and because all subsequent
chapters will use this functionality, I have created a procedure for use
in all chapters. "draw_in_square_viewport" is a C++ lambda, which just
means that it&#8217;s a procedure defined at runtime.  Don&#8217;t worry about the details
of lambdas, just know that the following two types are the same:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    2:</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #000000">glClearColor</span></span><span style="color: #990000">(</span><span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#r</span></span>
<span style="color: #000000">    4:</span>                  <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#g</span></span>
<span style="color: #000000">    5:</span>                  <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#b</span></span>
<span style="color: #000000">    6:</span>                  <span style="color: #993399">1.0</span><span style="color: #990000">)</span> <span style="font-style: italic"><span style="color: #9A1900">#a</span></span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #000000">glClear</span></span><span style="color: #990000">(</span>GL_COLOR_BUFFER_BIT<span style="color: #990000">)</span>
<span style="color: #000000">    8:</span>
<span style="color: #000000">    9:</span>     width<span style="color: #990000">,</span> height <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">glfwGetFramebufferSize</span></span><span style="color: #990000">(</span>window<span style="color: #990000">)</span>
<span style="color: #000000">   10:</span>     <span style="font-weight: bold"><span style="color: #000000">glViewport</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> width<span style="color: #990000">,</span> height<span style="color: #990000">)</span>
<span style="color: #000000">   11:</span>     <span style="font-weight: bold"><span style="color: #000000">glClear</span></span><span style="color: #990000">(</span>GL_COLOR_BUFFER_BIT <span style="color: #990000">|</span> GL_DEPTH_BUFFER_BIT<span style="color: #990000">)</span>
<span style="color: #000000">   12:</span>
<span style="color: #000000">   13:</span>     min <span style="color: #990000">=</span> width <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> width <span style="color: #990000">&lt;</span> height <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> height
<span style="color: #000000">   14:</span>
<span style="color: #000000">   15:</span>     <span style="font-weight: bold"><span style="color: #000000">glViewport</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">int</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>width <span style="color: #990000">-</span> min<span style="color: #990000">)/</span><span style="color: #993399">2.0</span><span style="color: #990000">),</span>  <span style="font-style: italic"><span style="color: #9A1900">#min x</span></span>
<span style="color: #000000">   16:</span>                <span style="font-weight: bold"><span style="color: #000000">int</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>height <span style="color: #990000">-</span> min<span style="color: #990000">)/</span><span style="color: #993399">2.0</span><span style="color: #990000">),</span> <span style="font-style: italic"><span style="color: #9A1900">#min y</span></span>
<span style="color: #000000">   17:</span>                min<span style="color: #990000">,</span>                           <span style="font-style: italic"><span style="color: #9A1900">#width x</span></span>
<span style="color: #000000">   18:</span>                min<span style="color: #990000">)</span>                           <span style="font-style: italic"><span style="color: #9A1900">#width y</span></span>
<span style="color: #000000">   19:</span>
<span style="color: #000000">   20:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnable</span></span><span style="color: #990000">(</span>GL_SCISSOR_TEST<span style="color: #990000">)</span>
<span style="color: #000000">   21:</span>     <span style="font-weight: bold"><span style="color: #000000">glScissor</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">int</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>width <span style="color: #990000">-</span> min<span style="color: #990000">)/</span><span style="color: #993399">2.0</span><span style="color: #990000">),</span>  <span style="font-style: italic"><span style="color: #9A1900">#min x</span></span>
<span style="color: #000000">   22:</span>               <span style="font-weight: bold"><span style="color: #000000">int</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>height <span style="color: #990000">-</span> min<span style="color: #990000">)/</span><span style="color: #993399">2.0</span><span style="color: #990000">),</span> <span style="font-style: italic"><span style="color: #9A1900">#min y</span></span>
<span style="color: #000000">   23:</span>               min<span style="color: #990000">,</span>                           <span style="font-style: italic"><span style="color: #9A1900">#width x</span></span>
<span style="color: #000000">   24:</span>               min<span style="color: #990000">)</span>                           <span style="font-style: italic"><span style="color: #9A1900">#width y</span></span>
<span style="color: #000000">   25:</span>
<span style="color: #000000">   26:</span>     <span style="font-weight: bold"><span style="color: #000000">glClearColor</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#r</span></span>
<span style="color: #000000">   27:</span>                  <span style="color: #993399">0.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#g</span></span>
<span style="color: #000000">   28:</span>                  <span style="color: #993399">0.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#b</span></span>
<span style="color: #000000">   29:</span>                  <span style="color: #993399">1.0</span><span style="color: #990000">)</span> <span style="font-style: italic"><span style="color: #9A1900">#a</span></span>
<span style="color: #000000">   30:</span>     <span style="font-weight: bold"><span style="color: #000000">glClear</span></span><span style="color: #990000">(</span>GL_COLOR_BUFFER_BIT<span style="color: #990000">)</span>
<span style="color: #000000">   31:</span>     <span style="font-weight: bold"><span style="color: #000000">glDisable</span></span><span style="color: #990000">(</span>GL_SCISSOR_TEST<span style="color: #990000">)</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_set_the_viewport_and_then_execute_the_code_from_chapter_3">5.2. Set the viewport, and then execute the code from chapter 3.</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">3</span><span style="color: #990000">)</span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo3</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    4:</span>     <span style="font-weight: bold"><span style="color: #000000">demo2</span></span><span style="color: #990000">()</span></tt></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_move_the_paddles_using_the_keyboard">6. Move the Paddles using the Keyboard</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all"
style="
width:75%;
">
<col style="width:50%;">
<col style="width:50%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Keyboard Input </th>
<th class="tableblock halign-left valign-top" >Action</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>i</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Move Right Paddle Down</strong></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>w</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Move Left Paddle Up</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>s</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Move Left Paddle Down</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>k</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Move Right Paddle Up</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>Paddles which don&#8217;t move are quite boring.  Let&#8217;s make them move up or down
by getting keyboard input.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> Vertex<span style="color: #990000">:</span>
<span style="color: #000000">    2:</span>     <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">__init__</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span>x<span style="color: #990000">,</span>y<span style="color: #990000">):</span>
<span style="color: #000000">    3:</span>         self<span style="color: #990000">.</span>x <span style="color: #990000">=</span> x
<span style="color: #000000">    4:</span>         self<span style="color: #990000">.</span>y <span style="color: #990000">=</span> y
<span style="color: #000000">    5:</span>
<span style="color: #000000">    6:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> Paddle<span style="color: #990000">:</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">__init__</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span>vertices<span style="color: #990000">,</span> r<span style="color: #990000">,</span> g<span style="color: #990000">,</span> b<span style="color: #990000">,</span> offsetX<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span> offsetY<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">):</span>
<span style="color: #000000">    8:</span>         self<span style="color: #990000">.</span>vertices <span style="color: #990000">=</span> vertices
<span style="color: #000000">    9:</span>         self<span style="color: #990000">.</span>r <span style="color: #990000">=</span> r
<span style="color: #000000">   10:</span>         self<span style="color: #990000">.</span>g <span style="color: #990000">=</span> g
<span style="color: #000000">   11:</span>         self<span style="color: #990000">.</span>b <span style="color: #990000">=</span> b
<span style="color: #000000">   12:</span>         self<span style="color: #990000">.</span>offsetX <span style="color: #990000">=</span> offsetX
<span style="color: #000000">   13:</span>         self<span style="color: #990000">.</span>offsetY <span style="color: #990000">=</span> offsetY
<span style="color: #000000">   14:</span>
<span style="color: #000000">   15:</span> paddle1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">Paddle</span></span><span style="color: #990000">(</span>vertices<span style="color: #990000">=[</span><span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(-</span><span style="color: #993399">1.0</span><span style="color: #990000">,-</span><span style="color: #993399">0.3</span><span style="color: #990000">),</span>
<span style="color: #000000">   16:</span>                            <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(-</span><span style="color: #993399">0.8</span><span style="color: #990000">,-</span><span style="color: #993399">0.3</span><span style="color: #990000">),</span>
<span style="color: #000000">   17:</span>                            <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(-</span><span style="color: #993399">0.8</span><span style="color: #990000">,</span><span style="color: #993399">0.3</span><span style="color: #990000">),</span>
<span style="color: #000000">   18:</span>                            <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(-</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span><span style="color: #993399">0.3</span><span style="color: #990000">)],</span>
<span style="color: #000000">   19:</span>                  r<span style="color: #990000">=</span><span style="color: #993399">0.578123</span><span style="color: #990000">,</span>
<span style="color: #000000">   20:</span>                  g<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   21:</span>                  b<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   22:</span>
<span style="color: #000000">   23:</span> paddle2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">Paddle</span></span><span style="color: #990000">(</span>vertices<span style="color: #990000">=[</span><span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span><span style="color: #993399">0.8</span><span style="color: #990000">,-</span><span style="color: #993399">0.3</span><span style="color: #990000">),</span>
<span style="color: #000000">   24:</span>                            <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span><span style="color: #993399">1.0</span><span style="color: #990000">,-</span><span style="color: #993399">0.3</span><span style="color: #990000">),</span>
<span style="color: #000000">   25:</span>                            <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span><span style="color: #993399">0.3</span><span style="color: #990000">),</span>
<span style="color: #000000">   26:</span>                            <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span><span style="color: #993399">0.8</span><span style="color: #990000">,</span><span style="color: #993399">0.3</span><span style="color: #990000">)],</span>
<span style="color: #000000">   27:</span>                  r<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   28:</span>                  g<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   29:</span>                  b<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   30:</span>
<span style="color: #000000">   31:</span>
<span style="color: #000000">   32:</span> inputHandlers <span style="color: #990000">=</span> <span style="color: #990000">[]</span>
<span style="color: #000000">   33:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">handle_inputs</span></span><span style="color: #990000">():</span>
<span style="color: #000000">   34:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> f <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> inputHandlers<span style="color: #990000">:</span>
<span style="color: #000000">   35:</span>         <span style="font-weight: bold"><span style="color: #000000">f</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   36:</span>
<span style="color: #000000">   37:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">handle_movement_of_paddles</span></span><span style="color: #990000">():</span>
<span style="color: #000000">   38:</span>     <span style="font-weight: bold"><span style="color: #0000FF">global</span></span> paddle1<span style="color: #990000">,</span> paddle2
<span style="color: #000000">   39:</span>
<span style="color: #000000">   40:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_S<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   41:</span>         paddle1<span style="color: #990000">.</span>offsetY <span style="color: #990000">-=</span> <span style="color: #993399">0.1</span>
<span style="color: #000000">   42:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_W<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   43:</span>         paddle1<span style="color: #990000">.</span>offsetY <span style="color: #990000">+=</span> <span style="color: #993399">0.1</span>
<span style="color: #000000">   44:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_K<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   45:</span>         paddle2<span style="color: #990000">.</span>offsetY <span style="color: #990000">-=</span> <span style="color: #993399">0.1</span>
<span style="color: #000000">   46:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_I<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   47:</span>         paddle2<span style="color: #990000">.</span>offsetY <span style="color: #990000">+=</span> <span style="color: #993399">0.1</span>
<span style="color: #000000">   48:</span> inputHandlers<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>handle_movement_of_paddles<span style="color: #990000">)</span></tt></pre></div></div>
<div class="paragraph"><p>Define a draw method on the Paddle class.  Python allows
both instance variables and methods to be added to a class
after it has already been defined.  Although the author
doesn&#8217;t recommend cavalier use of this concept, graphics
are best explained incrementally, and the dynamic features
of Python help towards this goal.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-style: italic"><span style="color: #9A1900"># define the method, currently unbound to a class</span></span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>self<span style="color: #990000">):</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span>r<span style="color: #990000">,</span>
<span style="color: #000000">    4:</span>               self<span style="color: #990000">.</span>g<span style="color: #990000">,</span>
<span style="color: #000000">    5:</span>               self<span style="color: #990000">.</span>b<span style="color: #990000">)</span>
<span style="color: #000000">    6:</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">    8:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> vertex <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> self<span style="color: #990000">.</span>vertices<span style="color: #990000">:</span>
<span style="color: #000000">    9:</span>         <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span>vertex<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   10:</span>                    vertex<span style="color: #990000">.</span>y <span style="color: #990000">+</span> self<span style="color: #990000">.</span>offsetY<span style="color: #990000">)</span>
<span style="color: #000000">   11:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   12:</span> <span style="font-style: italic"><span style="color: #9A1900"># add the draw method to the Paddle class</span></span>
<span style="color: #000000">   13:</span> Paddle<span style="color: #990000">.</span>draw <span style="color: #990000">=</span> draw</tt></pre></div></div>
<div class="paragraph"><p>-If <em>s</em> is pressed this frame, subtract 0.1 more from paddle1.offsetY.  If the
key continues to be held down over time, paddle1.offsetY will continue to decrease.</p></div>
<div class="paragraph"><p>-If <em>w</em> is pressed this frame, add 0.1 more to paddle1.offsetY.</p></div>
<div class="paragraph"><p>-If <em>k</em> is pressed this frame, subtract 0.1 more from paddle_2_offset_Y.</p></div>
<div class="paragraph"><p>-If <em>i</em> is pressed this frame, add 0.1 more to paddle_2_offset_Y.</p></div>
<div class="paragraph"><p>Remember, these are static variables, so changes to these variables will
accumulate across frames.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">4</span><span style="color: #990000">)</span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo4</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    4:</span>     <span style="font-weight: bold"><span style="color: #000000">handle_inputs</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="paragraph"><p>Draw paddle 1, relative to the world-space origin.
Add paddle1.offsetY to the "y" component of every vertex</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span>     paddle1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="paragraph"><p><span class="image">
<img src="plot3.png" alt="plot3.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>Draw paddle 2, relative to the world-space origin.
Add paddle_2_offset_Y to the "y" component of every vertex</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span>     paddle2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="paragraph"><p><span class="image">
<img src="plot4.png" alt="plot4.png" title="Foo">
</span></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_translation">7. Translation</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all"
style="
width:75%;
">
<col style="width:50%;">
<col style="width:50%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Keyboard Input </th>
<th class="tableblock halign-left valign-top" >Action</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">i</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Down</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">w</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">k</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Up</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>Transforming vertices, such as translating, is the core concept
of computer graphics.</p></div>
<div class="sect2">
<h3 id="_translation_2">7.1. Translation</h3>
<div class="paragraph"><p>Rather than incrementing y values before calling "glVertex",
instead call "translate" on the vertex, and call "glVertex2f"
on the translated vertex.</p></div>
<div class="paragraph"><p><span class="image">
<img src="translate.png" alt="translate.png" title="Foo">
</span></p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>TODO -- rename translate's x and y to tx and ty</pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-style: italic"><span style="color: #9A1900"># add translate method to Vertex</span></span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span> tx<span style="color: #990000">,</span> ty<span style="color: #990000">):</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span>self<span style="color: #990000">.</span>x <span style="color: #990000">+</span> tx<span style="color: #990000">,</span> y<span style="color: #990000">=</span>self<span style="color: #990000">.</span>y <span style="color: #990000">+</span> ty<span style="color: #990000">)</span>
<span style="color: #000000">    4:</span> Vertex<span style="color: #990000">.</span>translate <span style="color: #990000">=</span> translate
<span style="color: #000000">    5:</span>
<span style="color: #000000">    6:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>self<span style="color: #990000">):</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span>r<span style="color: #990000">,</span>
<span style="color: #000000">    8:</span>               self<span style="color: #990000">.</span>g<span style="color: #990000">,</span>
<span style="color: #000000">    9:</span>               self<span style="color: #990000">.</span>b<span style="color: #990000">)</span>
<span style="color: #000000">   10:</span>
<span style="color: #000000">   11:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">   12:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> vertex <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> self<span style="color: #990000">.</span>vertices<span style="color: #990000">:</span>
<span style="color: #000000">   13:</span>         translated <span style="color: #990000">=</span> vertex<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   14:</span>                                       ty<span style="color: #990000">=</span>self<span style="color: #990000">.</span>offsetY<span style="color: #990000">)</span>
<span style="color: #000000">   15:</span>         <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span>translated<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   16:</span>                    translated<span style="color: #990000">.</span>y<span style="color: #990000">)</span>
<span style="color: #000000">   17:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   18:</span> Paddle<span style="color: #990000">.</span>draw <span style="color: #990000">=</span> draw
<span style="color: #000000">   19:</span>
<span style="color: #000000">   20:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">5</span><span style="color: #990000">)</span>
<span style="color: #000000">   21:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo5</span></span><span style="color: #990000">():</span>
<span style="color: #000000">   22:</span>     <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   23:</span>     <span style="font-weight: bold"><span style="color: #000000">handle_inputs</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   24:</span>
<span style="color: #000000">   25:</span>     paddle1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   26:</span>     paddle2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span></tt></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_model_space">8. Model-space</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all"
style="
width:75%;
">
<col style="width:50%;">
<col style="width:50%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Keyboard Input </th>
<th class="tableblock halign-left valign-top" >Action</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">i</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Down</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">w</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">k</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Up</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>Normalized-device-coordinates are not a natural system of
numbers for use by humans.  Imagine that the paddles in the previous
chapters exist in real life, and are 20 meters wide and 60 meters tall.
The graphics programmer should be able to use those numbers directly;
they shouldn&#8217;t have to manually trasform the distances into normalized-device-coordinates.</p></div>
<div class="paragraph"><p>Whatever a convenient numbering system is (i.e. coordinate system) for modeling objects
is called "model-space".  Since a paddle has four corners, which corner should be a
the origin (0,0)?  If you don&#8217;t already know what you want at the origin, then
none of the corners should be; instead put the center of the object
at the origin<span class="footnote"><br>[By putting the center of the object at the origin,
scaling and rotating the object are trivial]<br></span>.</p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspace.png" alt="modelspace.png" title="Foo">
</span></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> paddle1<span style="color: #990000">.</span>globalPosition <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(-</span><span style="color: #993399">90.0</span><span style="color: #990000">,</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span>
<span style="color: #000000">    2:</span> paddle1<span style="color: #990000">.</span>vertices<span style="color: #990000">=[</span><span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=-</span><span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=-</span><span style="color: #993399">30.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    3:</span>                   <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> <span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=-</span><span style="color: #993399">30.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    4:</span>                   <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> <span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=</span><span style="color: #993399">30.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    5:</span>                   <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=-</span><span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=</span><span style="color: #993399">30.0</span><span style="color: #990000">)]</span>
<span style="color: #000000">    6:</span>
<span style="color: #000000">    7:</span> paddle2<span style="color: #990000">.</span>globalPosition <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span><span style="color: #993399">90.0</span><span style="color: #990000">,</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span>
<span style="color: #000000">    8:</span> paddle2<span style="color: #990000">.</span>vertices <span style="color: #990000">=</span> <span style="color: #990000">[</span><span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=-</span><span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=-</span><span style="color: #993399">30.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    9:</span>                     <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> <span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=-</span><span style="color: #993399">30.0</span><span style="color: #990000">),</span>
<span style="color: #000000">   10:</span>                     <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> <span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=</span><span style="color: #993399">30.0</span><span style="color: #990000">),</span>
<span style="color: #000000">   11:</span>                     <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=-</span><span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=</span><span style="color: #993399">30.0</span><span style="color: #990000">)]</span>
<span style="color: #000000">   12:</span>
<span style="color: #000000">   13:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>self<span style="color: #990000">):</span>
<span style="color: #000000">   14:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span>r<span style="color: #990000">,</span>
<span style="color: #000000">   15:</span>               self<span style="color: #990000">.</span>g<span style="color: #990000">,</span>
<span style="color: #000000">   16:</span>               self<span style="color: #990000">.</span>b<span style="color: #990000">)</span>
<span style="color: #000000">   17:</span>
<span style="color: #000000">   18:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">   19:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> modelspace <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> self<span style="color: #990000">.</span>vertices<span style="color: #990000">:</span>
<span style="color: #000000">   20:</span>         worldSpace <span style="color: #990000">=</span> modelspace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>self<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   21:</span>                                           ty<span style="color: #990000">=</span>self<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>y<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   22:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   23:</span>                                           ty<span style="color: #990000">=</span>self<span style="color: #990000">.</span>offsetY<span style="color: #990000">)</span>
<span style="color: #000000">   24:</span>
<span style="color: #000000">   25:</span>         ndcSpace <span style="color: #990000">=</span> worldSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   26:</span>                                     y<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   27:</span>         <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span>ndcSpace<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   28:</span>                    ndcSpace<span style="color: #990000">.</span>y<span style="color: #990000">)</span>
<span style="color: #000000">   29:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   30:</span> Paddle<span style="color: #990000">.</span>draw <span style="color: #990000">=</span> draw</tt></pre></div></div>
<div class="paragraph"><p>Model-space to World-space.</p></div>
<div class="paragraph"><p>You can view the transformations from first transformation to last,
where all transformations happen relative to the world-space origin.
(this works well for world-space to camera-space,
but not so well for model-space transformations)</p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFrame1.png" alt="modelspacePaddleMovingFrame1.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFrame2.png" alt="modelspacePaddleMovingFrame2.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFrame3.png" alt="modelspacePaddleMovingFrame3.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFrame3.5.png" alt="modelspacePaddleMovingFrame3.5.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFrame4.png" alt="modelspacePaddleMovingFrame4.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFrame4.png" alt="modelspacePaddleMovingFrame4.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFrame5.png" alt="modelspacePaddleMovingFrame5.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFrame6.png" alt="modelspacePaddleMovingFrame6.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFrame6.5.png" alt="modelspacePaddleMovingFrame6.5.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>Instead, for model-space to world-space transformations (and for these transformations only),
it&#8217;s easier to read the transformations backwards, where the transformations
aren&#8217;t relative to the global origin, instead it&#8217;s from the local frame of reference.</p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFramebackwards1.png" alt="modelspacePaddleMovingFramebackwards1.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFramebackwards2.png" alt="modelspacePaddleMovingFramebackwards2.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFramebackwards3.png" alt="modelspacePaddleMovingFramebackwards3.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFramebackwards3.5.png" alt="modelspacePaddleMovingFramebackwards3.5.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFramebackwards4.png" alt="modelspacePaddleMovingFramebackwards4.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFramebackwards4.png" alt="modelspacePaddleMovingFramebackwards4.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFramebackwards5.png" alt="modelspacePaddleMovingFramebackwards5.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFramebackwards6.png" alt="modelspacePaddleMovingFramebackwards6.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddleMovingFramebackwards6.5.png" alt="modelspacePaddleMovingFramebackwards6.5.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>Why do the two different views of the transformations matter?  In model-space
to world-space transformations, especially once rotation and scaling of model-space
is used, it allows the programmer to forget about most details, just specify
where new objects are relative to that which you are already drawing.</p></div>
<div class="paragraph"><p>With that said, that doesn&#8217;t mean that reading the transformations front to back
has no value.  But it only has value in world-space to camera-space conversions,
and from camera-space to ndc-space.</p></div>
<div class="paragraph"><p>This will make more sense once rotation is involved.</p></div>
<div class="sect2">
<h3 id="_scaling">8.1. Scaling</h3>
<div class="paragraph"><p><span class="image">
<img src="scale.png" alt="scale.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>Similarly, we can expand or shrink the size of an object
by "scale"ing each of the vertices of the object, assuming
the object&#8217;s center is at (0,0).</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-style: italic"><span style="color: #9A1900"># add scale method to Vertex</span></span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span> x<span style="color: #990000">,</span> y<span style="color: #990000">):</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span>self<span style="color: #990000">.</span>x <span style="color: #990000">*</span> x<span style="color: #990000">,</span> y<span style="color: #990000">=</span>self<span style="color: #990000">.</span>y <span style="color: #990000">*</span> y<span style="color: #990000">)</span>
<span style="color: #000000">    4:</span> Vertex<span style="color: #990000">.</span>scale <span style="color: #990000">=</span> scale</tt></pre></div></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddle7.png" alt="modelspacePaddle7.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>World-space to NDC-space.</p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacePaddle8.png" alt="modelspacePaddle8.png" title="Foo">
</span></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">handle_movement_of_paddles</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    2:</span>     <span style="font-weight: bold"><span style="color: #0000FF">global</span></span> paddle1<span style="color: #990000">,</span> paddle2
<span style="color: #000000">    3:</span>
<span style="color: #000000">    4:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_S<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    5:</span>         paddle1<span style="color: #990000">.</span>offsetY <span style="color: #990000">-=</span> <span style="color: #993399">10.0</span>
<span style="color: #000000">    6:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_W<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    7:</span>         paddle1<span style="color: #990000">.</span>offsetY <span style="color: #990000">+=</span> <span style="color: #993399">10.0</span>
<span style="color: #000000">    8:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_K<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    9:</span>         paddle2<span style="color: #990000">.</span>offsetY <span style="color: #990000">-=</span> <span style="color: #993399">10.0</span>
<span style="color: #000000">   10:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_I<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   11:</span>         paddle2<span style="color: #990000">.</span>offsetY <span style="color: #990000">+=</span> <span style="color: #993399">10.0</span>
<span style="color: #000000">   12:</span> inputHandlers <span style="color: #990000">=</span> <span style="color: #990000">[]</span>
<span style="color: #000000">   13:</span> inputHandlers<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>handle_movement_of_paddles<span style="color: #990000">)</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">6</span><span style="color: #990000">)</span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo6</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    4:</span>     <span style="font-weight: bold"><span style="color: #000000">handle_inputs</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    5:</span>     paddle1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    6:</span>     paddle2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_rotation_around_origin_0_0">8.2. Rotation Around Origin (0,0)</h3>
<div class="paragraph"><p>We can also rotate an object around (0,0) by rotating
all of the object&#8217;s vertices around (0,0).  Although defined now,
this won&#8217;t
be used until later.</p></div>
<div class="paragraph"><p>In high school math, you will have learned about sin, cos, and tangent.
Typically the angles are described on the unit circle, where a rotation
starts from the positive x axis.  We can expand on this knowledge, allowing
us to rotate a given vertex around the origin (0,0).  This is done
by separating the x and y value, rotating each of them seperately,
and then adding the results together.</p></div>
<div class="paragraph"><p>That might not have been fully clear.  Let me try again.
The vertex (0.5,0.4) can be separated into two vertices, (0.5,0) and (0,0.4).</p></div>
<div class="paragraph"><p><span class="image">
<img src="rotate3.png" alt="rotate3.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="rotate4.png" alt="rotate4.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>These vertices can be added together to create the original vertex.
But, before we do that, let&#8217;s rotate each of the vertices.</p></div>
<div class="paragraph"><p>(0.5,0) is on the x-axis, so rotating it by "angle" degrees, results
in vertex (0.5*cos(angle), 0.5*sin(angle)).  Notice that both the x and
y values are multiplied by 0.5.  This is because rotations should not affect
the distance of the point from the origin (0,0).  (0.5,0) has length 0.5.
(cos(angle), sin(angle) has length 1. By multipling both the x and y
component by 0.5, we are scaling the vertex back to its original distance
from the origin.</p></div>
<div class="paragraph"><p><span class="image">
<img src="rotate.png" alt="rotate.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>(0,0.4) is on the y-axis, so rotating it by "angle" degrees, results
in vertex (0.4*-sin(angle), 0.4*cos(angle)).</p></div>
<div class="paragraph"><p><span class="image">
<img src="rotate2.png" alt="rotate2.png" title="Foo">
</span></p></div>
<div class="paragraph"><p>Wait.  Why is negative
sin applied to the angle to make the x value, and cos applied to angle to make the y value?
Trigonometric operations such as sin, cos, and tangent assume that the rotation is happening on
the unit circle, starting from (1,0) on the x axis.  Since we want
to rotate an angle starting from (0,1) on the y axis, we sin and
cos must be swapped.  Sin is positive from 0 to 90 degrees, but
we want a negative value for our rotation of the y axis since the rotation is happening counter-clockwise,
hence the negative sin.</p></div>
<div class="paragraph"><p>After the rotations have been applied, sum the results to
get your vertex rotated around the origin!</p></div>
<div class="paragraph"><p>(0.5*cos(angle), 0.5*sin(angle)) + (0.4*-sin(angle), 0.4*cos(angle)) =
(0.5*cos(angle) + 0.4*-sin(angle), 0.5*sin(angle) + 0.4*cos(angle))</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> paddle1<span style="color: #990000">.</span>rotation <span style="color: #990000">=</span> <span style="color: #993399">0.0</span>
<span style="color: #000000">    2:</span> paddle2<span style="color: #990000">.</span>rotation <span style="color: #990000">=</span> <span style="color: #993399">0.0</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-style: italic"><span style="color: #9A1900"># add rotate method to Vertex</span></span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span>angle_in_radians<span style="color: #990000">):</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> self<span style="color: #990000">.</span>x <span style="color: #990000">*</span> math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">)</span> <span style="color: #990000">-</span> self<span style="color: #990000">.</span>y <span style="color: #990000">*</span> math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">),</span>
<span style="color: #000000">    4:</span>                   y<span style="color: #990000">=</span> self<span style="color: #990000">.</span>x <span style="color: #990000">*</span> math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">)</span> <span style="color: #990000">+</span> self<span style="color: #990000">.</span>y <span style="color: #990000">*</span> math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">))</span>
<span style="color: #000000">    5:</span> Vertex<span style="color: #990000">.</span>rotate <span style="color: #990000">=</span> rotate</tt></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rotate_the_paddles_about_their_center">9. Rotate the Paddles About their Center</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all"
style="
width:75%;
">
<col style="width:50%;">
<col style="width:50%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Keyboard Input </th>
<th class="tableblock halign-left valign-top" >Action</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>j</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Decrease Right Paddle&#8217;s Rotation</strong></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">w</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">k</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">i</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>d</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Increase Left Paddle&#8217;s Rotation</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>a</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Decrease Left Paddle&#8217;s Rotation</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>l</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Increase Right Paddle&#8217;s Rotation</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p># TODO - describe angle as radians
# TODO - show unit circle
# TODO - show orthonormal basis
# TODO - show basic proof of rotate</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">handle_paddle_rotations</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    2:</span>     <span style="font-weight: bold"><span style="color: #0000FF">global</span></span> paddle_1_rotation<span style="color: #990000">,</span> paddle_2_rotation
<span style="color: #000000">    3:</span>
<span style="color: #000000">    4:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_A<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    5:</span>         paddle1<span style="color: #990000">.</span>rotation <span style="color: #990000">+=</span> <span style="color: #993399">0.1</span>
<span style="color: #000000">    6:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_D<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    7:</span>         paddle1<span style="color: #990000">.</span>rotation <span style="color: #990000">-=</span> <span style="color: #993399">0.1</span>
<span style="color: #000000">    8:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_J<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    9:</span>         paddle2<span style="color: #990000">.</span>rotation <span style="color: #990000">+=</span> <span style="color: #993399">0.1</span>
<span style="color: #000000">   10:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_L<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   11:</span>         paddle2<span style="color: #990000">.</span>rotation <span style="color: #990000">-=</span> <span style="color: #993399">0.1</span>
<span style="color: #000000">   12:</span> inputHandlers<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>handle_paddle_rotations<span style="color: #990000">)</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>self<span style="color: #990000">):</span>
<span style="color: #000000">    2:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span>r<span style="color: #990000">,</span>
<span style="color: #000000">    3:</span>               self<span style="color: #990000">.</span>g<span style="color: #990000">,</span>
<span style="color: #000000">    4:</span>               self<span style="color: #990000">.</span>b<span style="color: #990000">)</span>
<span style="color: #000000">    5:</span>
<span style="color: #000000">    6:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> modelspace <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> self<span style="color: #990000">.</span>vertices<span style="color: #990000">:</span>
<span style="color: #000000">    8:</span>         worldSpace <span style="color: #990000">=</span> modelspace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span>rotation<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">    9:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>self<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   10:</span>                                           ty<span style="color: #990000">=</span>self<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>y<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   11:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   12:</span>                                           ty<span style="color: #990000">=</span>self<span style="color: #990000">.</span>offsetY<span style="color: #990000">)</span>
<span style="color: #000000">   13:</span>
<span style="color: #000000">   14:</span>         ndcSpace <span style="color: #990000">=</span> worldSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   15:</span>                                     y<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   16:</span>         <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span>ndcSpace<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   17:</span>                    ndcSpace<span style="color: #990000">.</span>y<span style="color: #990000">)</span>
<span style="color: #000000">   18:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   19:</span> Paddle<span style="color: #990000">.</span>draw <span style="color: #990000">=</span> draw
<span style="color: #000000">   20:</span>
<span style="color: #000000">   21:</span>
<span style="color: #000000">   22:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">7</span><span style="color: #990000">)</span>
<span style="color: #000000">   23:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo7</span></span><span style="color: #990000">():</span>
<span style="color: #000000">   24:</span>     <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   25:</span>     <span style="font-weight: bold"><span style="color: #000000">handle_inputs</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   26:</span>
<span style="color: #000000">   27:</span>     paddle1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   28:</span>     paddle2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation.png" alt="modelspacerotation.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation2.png" alt="modelspacerotation2.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation2.5.png" alt="modelspacerotation2.5.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation3.png" alt="modelspacerotation3.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation4.png" alt="modelspacerotation4.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation4.5.png" alt="modelspacerotation4.5.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation5.png" alt="modelspacerotation5.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation6.png" alt="modelspacerotation6.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation7.png" alt="modelspacerotation7.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation7.5.png" alt="modelspacerotation7.5.png" title="Foo">
</span></p></div>
<div class="paragraph"><p><span class="image">
<img src="modelspacerotation8.png" alt="modelspacerotation8.png" title="Foo">
</span></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-style: italic"><span style="color: #9A1900"># add rotate around method to Vertex</span></span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">rotate_around</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">,</span> center<span style="color: #990000">):</span>
<span style="color: #000000">    3:</span>     translateToCenter <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(-</span>center<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">    4:</span>                                   <span style="color: #990000">-</span>center<span style="color: #990000">.</span>y<span style="color: #990000">)</span>
<span style="color: #000000">    5:</span>     rotatedAroundOrigin <span style="color: #990000">=</span> translateToCenter<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">)</span>
<span style="color: #000000">    6:</span>     backToCenter <span style="color: #990000">=</span> rotatedAroundOrigin<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>center<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">    7:</span>                                                  ty<span style="color: #990000">=</span>center<span style="color: #990000">.</span>y<span style="color: #990000">)</span>
<span style="color: #000000">    8:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> backToCenter
<span style="color: #000000">    9:</span>
<span style="color: #000000">   10:</span> Vertex<span style="color: #990000">.</span>rotate_around <span style="color: #990000">=</span> rotate_around</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_camera_management">10. Camera Management</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all"
style="
width:75%;
">
<col style="width:50%;">
<col style="width:50%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Keyboard Input </th>
<th class="tableblock halign-left valign-top" >Action</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>RIGHT</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Move the Camera Right</strong></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">w</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">k</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">i</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">d</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Increase Left Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">a</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Decrease Left Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">l</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Increase Right Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">j</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Decrease Right Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>UP</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Move the Camera Up</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>DOWN</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Move the Camera Down</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>LEFT</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Move the Camera Left</strong></p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #000080"># TODO</span></span> <span style="color: #990000">-</span> describe implicit camera <span style="color: #008080">at</span> origin<span style="color: #990000">,</span> and <span style="color: #008080">making</span> it<span style="color: #FF0000">'s location explicit</span>
<span style="color: #000000">    2:</span> <span style="color: #FF0000"># TODO - descriibe desire for moving camera</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> camera_x <span style="color: #990000">=</span> <span style="color: #993399">0.0</span>
<span style="color: #000000">    2:</span> camera_y <span style="color: #990000">=</span> <span style="color: #993399">0.0</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">handle_camera_movement</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    2:</span>     <span style="font-weight: bold"><span style="color: #0000FF">global</span></span> camera_x<span style="color: #990000">,</span> camera_y
<span style="color: #000000">    3:</span>
<span style="color: #000000">    4:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_UP<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    5:</span>         camera_y <span style="color: #990000">+=</span> <span style="color: #993399">10.0</span>
<span style="color: #000000">    6:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_DOWN<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    7:</span>         camera_y <span style="color: #990000">-=</span> <span style="color: #993399">10.0</span>
<span style="color: #000000">    8:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_LEFT<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    9:</span>         camera_x <span style="color: #990000">-=</span> <span style="color: #993399">10.0</span>
<span style="color: #000000">   10:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_RIGHT<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   11:</span>         camera_x <span style="color: #990000">+=</span> <span style="color: #993399">10.0</span>
<span style="color: #000000">   12:</span> inputHandlers<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>handle_camera_movement<span style="color: #990000">)</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>self<span style="color: #990000">):</span>
<span style="color: #000000">    2:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span>r<span style="color: #990000">,</span>
<span style="color: #000000">    3:</span>               self<span style="color: #990000">.</span>g<span style="color: #990000">,</span>
<span style="color: #000000">    4:</span>               self<span style="color: #990000">.</span>b<span style="color: #990000">)</span>
<span style="color: #000000">    5:</span>
<span style="color: #000000">    6:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> modelspace <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> self<span style="color: #990000">.</span>vertices<span style="color: #990000">:</span>
<span style="color: #000000">    8:</span>         worldSpace <span style="color: #990000">=</span> modelspace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span>rotation<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">    9:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>self<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   10:</span>                                           ty<span style="color: #990000">=</span>self<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>y<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   11:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   12:</span>                                           ty<span style="color: #990000">=</span>self<span style="color: #990000">.</span>offsetY<span style="color: #990000">)</span>
<span style="color: #000000">   13:</span>
<span style="color: #000000">   14:</span>         cameraSpace <span style="color: #990000">=</span> worldSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=-</span>camera_x<span style="color: #990000">,</span>
<span style="color: #000000">   15:</span>                                            ty<span style="color: #990000">=-</span>camera_y<span style="color: #990000">)</span>
<span style="color: #000000">   16:</span>         ndcSpace <span style="color: #990000">=</span> cameraSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   17:</span>                                      y<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   18:</span>         <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span>ndcSpace<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   19:</span>                    ndcSpace<span style="color: #990000">.</span>y<span style="color: #990000">)</span>
<span style="color: #000000">   20:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   21:</span> Paddle<span style="color: #990000">.</span>draw <span style="color: #990000">=</span> draw
<span style="color: #000000">   22:</span>
<span style="color: #000000">   23:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">8</span><span style="color: #990000">)</span>
<span style="color: #000000">   24:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo8</span></span><span style="color: #990000">():</span>
<span style="color: #000000">   25:</span>     <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   26:</span>     <span style="font-weight: bold"><span style="color: #000000">handle_inputs</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   27:</span>
<span style="color: #000000">   28:</span>     paddle1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   29:</span>     paddle2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_relative_objects">11. Relative Objects</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all"
style="
width:75%;
">
<col style="width:50%;">
<col style="width:50%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Keyboard Input </th>
<th class="tableblock halign-left valign-top" >Action</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">w</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">k</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">i</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">d</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Increase Left Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">a</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Decrease Left Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">l</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Increase Right Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">j</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Decrease Right Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">UP</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">DOWN</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">LEFT</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">RIGHT</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Right</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> square <span style="color: #990000">=</span> <span style="color: #990000">[</span><span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=-</span><span style="color: #993399">5.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=-</span><span style="color: #993399">5.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    2:</span>           <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> <span style="color: #993399">5.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=-</span><span style="color: #993399">5.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    3:</span>           <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> <span style="color: #993399">5.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=</span> <span style="color: #993399">5.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    4:</span>           <span style="font-weight: bold"><span style="color: #000000">Vertex</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=-</span><span style="color: #993399">5.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=</span> <span style="color: #993399">5.0</span><span style="color: #990000">)]</span>
<span style="color: #000000">    5:</span>
<span style="color: #000000">    6:</span>
<span style="color: #000000">    7:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">9</span><span style="color: #990000">)</span>
<span style="color: #000000">    8:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo9</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    9:</span>     <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   10:</span>     <span style="font-weight: bold"><span style="color: #000000">handle_inputs</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   11:</span>
<span style="color: #000000">   12:</span>     paddle1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   13:</span>
<span style="color: #000000">   14:</span>     <span style="font-style: italic"><span style="color: #9A1900"># draw the square relative to paddle 1</span></span>
<span style="color: #000000">   15:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#r</span></span>
<span style="color: #000000">   16:</span>               <span style="color: #993399">0.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#g</span></span>
<span style="color: #000000">   17:</span>               <span style="color: #993399">1.0</span><span style="color: #990000">)</span> <span style="font-style: italic"><span style="color: #9A1900">#b</span></span>
<span style="color: #000000">   18:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">   19:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> modelspace <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> square<span style="color: #990000">:</span>
<span style="color: #000000">   20:</span>         worldSpace <span style="color: #990000">=</span> modelspace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span><span style="color: #993399">20.0</span><span style="color: #990000">,</span> ty<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   21:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>paddle1<span style="color: #990000">.</span>rotation<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   22:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   23:</span>                                           ty<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>y<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   24:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>offsetX<span style="color: #990000">,</span>
<span style="color: #000000">   25:</span>                                           ty<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>offsetY<span style="color: #990000">)</span>
<span style="color: #000000">   26:</span>         cameraSpace <span style="color: #990000">=</span> worldSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=-</span>camera_x<span style="color: #990000">,</span>
<span style="color: #000000">   27:</span>                                            ty<span style="color: #990000">=-</span>camera_y<span style="color: #990000">)</span>
<span style="color: #000000">   28:</span>         ndcSpace <span style="color: #990000">=</span> cameraSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   29:</span>                                      y<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   30:</span>         <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span>ndcSpace<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   31:</span>                    ndcSpace<span style="color: #990000">.</span>y<span style="color: #990000">)</span>
<span style="color: #000000">   32:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   33:</span>
<span style="color: #000000">   34:</span>     paddle2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_rotate_the_square_about_its_origin">12. Rotate the Square About Its Origin</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all"
style="
width:75%;
">
<col style="width:50%;">
<col style="width:50%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Keyboard Input </th>
<th class="tableblock halign-left valign-top" >Action</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>q</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Rotate the square around its center.</strong></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">w</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">k</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">i</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">d</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Increase Left Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">a</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Decrease Left Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">l</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Increase Right Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">j</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Decrease Right Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">UP</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">DOWN</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">LEFT</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">RIGHT</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> square_rotation <span style="color: #990000">=</span> <span style="color: #993399">0.0</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">handle_square_rotation</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    2:</span>     <span style="font-weight: bold"><span style="color: #0000FF">global</span></span> square_rotation
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_Q<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    4:</span>         square_rotation <span style="color: #990000">+=</span> <span style="color: #993399">0.1</span>
<span style="color: #000000">    5:</span> inputHandlers<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>handle_square_rotation<span style="color: #990000">)</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">)</span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo10</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    4:</span>     <span style="font-weight: bold"><span style="color: #000000">handle_inputs</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="paragraph"><p>Handle the rotation.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span>     paddle1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    2:</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#r</span></span>
<span style="color: #000000">    4:</span>               <span style="color: #993399">0.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#g</span></span>
<span style="color: #000000">    5:</span>               <span style="color: #993399">1.0</span><span style="color: #990000">)</span> <span style="font-style: italic"><span style="color: #9A1900">#b</span></span>
<span style="color: #000000">    6:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> modelspace <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> square<span style="color: #990000">:</span>
<span style="color: #000000">    8:</span>         worldSpace <span style="color: #990000">=</span> modelspace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>square_rotation<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">    9:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span><span style="color: #993399">20.0</span><span style="color: #990000">,</span> ty<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   10:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>paddle1<span style="color: #990000">.</span>rotation<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   11:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   12:</span>                                           ty<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>y<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   13:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>offsetX<span style="color: #990000">,</span>
<span style="color: #000000">   14:</span>                                           ty<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>offsetY<span style="color: #990000">)</span>
<span style="color: #000000">   15:</span>
<span style="color: #000000">   16:</span>         cameraSpace <span style="color: #990000">=</span> worldSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=-</span>camera_x<span style="color: #990000">,</span>
<span style="color: #000000">   17:</span>                                            ty<span style="color: #990000">=-</span>camera_y<span style="color: #990000">)</span>
<span style="color: #000000">   18:</span>         ndcSpace <span style="color: #990000">=</span> cameraSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   19:</span>                                      y<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   20:</span>         <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span>ndcSpace<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   21:</span>                    ndcSpace<span style="color: #990000">.</span>y<span style="color: #990000">)</span>
<span style="color: #000000">   22:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   23:</span>
<span style="color: #000000">   24:</span>     paddle2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_relative_rotation">13. Relative Rotation</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all"
style="
width:75%;
">
<col style="width:50%;">
<col style="width:50%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Keyboard Input </th>
<th class="tableblock halign-left valign-top" >Action</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>e</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>Rotate the square around the left paddle</strong></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">w</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Left Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">k</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">i</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move Right Paddle Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">d</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Increase Left Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">a</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Decrease Left Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">l</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Increase Right Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">j</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Decrease Right Paddle&#8217;s Rotation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">UP</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">DOWN</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">LEFT</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">RIGHT</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Move the Camera Right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">q</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Rotate the square around its center</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> rotationAroundPaddle1 <span style="color: #990000">=</span> <span style="color: #993399">0.0</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">handle_relative_rotation</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    2:</span>     <span style="font-weight: bold"><span style="color: #0000FF">global</span></span> rotationAroundPaddle1
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_E<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">    4:</span>         rotationAroundPaddle1 <span style="color: #990000">+=</span> <span style="color: #993399">0.1</span>
<span style="color: #000000">    5:</span> inputHandlers<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>handle_relative_rotation<span style="color: #990000">)</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">11</span><span style="color: #990000">)</span>
<span style="color: #000000">    2:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo11</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    4:</span>     <span style="font-weight: bold"><span style="color: #000000">handle_inputs</span></span><span style="color: #990000">()</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span>     paddle1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    2:</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#r</span></span>
<span style="color: #000000">    4:</span>               <span style="color: #993399">0.0</span><span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">#g</span></span>
<span style="color: #000000">    5:</span>               <span style="color: #993399">1.0</span><span style="color: #990000">)</span> <span style="font-style: italic"><span style="color: #9A1900">#b</span></span>
<span style="color: #000000">    6:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> modelspace <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> square<span style="color: #990000">:</span>
<span style="color: #000000">    8:</span>         worldSpace <span style="color: #990000">=</span> modelspace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>square_rotation<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">    9:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span><span style="color: #993399">20.0</span><span style="color: #990000">,</span> ty<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   10:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>rotationAroundPaddle1<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   11:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>paddle1<span style="color: #990000">.</span>rotation<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   12:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   13:</span>                                           ty<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>y<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   14:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>offsetX<span style="color: #990000">,</span>
<span style="color: #000000">   15:</span>                                           ty<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>offsetY<span style="color: #990000">)</span>
<span style="color: #000000">   16:</span>
<span style="color: #000000">   17:</span>         cameraSpace <span style="color: #990000">=</span> worldSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=-</span>camera_x<span style="color: #990000">,</span>
<span style="color: #000000">   18:</span>                                            ty<span style="color: #990000">=-</span>camera_y<span style="color: #990000">)</span>
<span style="color: #000000">   19:</span>         ndcSpace <span style="color: #990000">=</span> cameraSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   20:</span>                                      y<span style="color: #990000">=</span><span style="color: #993399">1.0</span><span style="color: #990000">/</span><span style="color: #993399">100.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   21:</span>         <span style="font-weight: bold"><span style="color: #000000">glVertex2f</span></span><span style="color: #990000">(</span>ndcSpace<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   22:</span>                    ndcSpace<span style="color: #990000">.</span>y<span style="color: #990000">)</span>
<span style="color: #000000">   23:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   24:</span>
<span style="color: #000000">   25:</span>     paddle2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_depth">14. Adding Depth</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Vertex3</span><span style="color: #990000">:</span>
<span style="color: #000000">    2:</span>     <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">__init__</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>z<span style="color: #990000">):</span>
<span style="color: #000000">    3:</span>         self<span style="color: #990000">.</span>x <span style="color: #990000">=</span> x
<span style="color: #000000">    4:</span>         self<span style="color: #990000">.</span>y <span style="color: #990000">=</span> y
<span style="color: #000000">    5:</span>         self<span style="color: #990000">.</span>z <span style="color: #990000">=</span> z
<span style="color: #000000">    6:</span>
<span style="color: #000000">    7:</span> <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span> tx<span style="color: #990000">,</span> ty<span style="color: #990000">,</span> tz<span style="color: #990000">):</span>
<span style="color: #000000">    8:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span>self<span style="color: #990000">.</span>x <span style="color: #990000">+</span> tx<span style="color: #990000">,</span>
<span style="color: #000000">    9:</span>                    y<span style="color: #990000">=</span>self<span style="color: #990000">.</span>y <span style="color: #990000">+</span> ty<span style="color: #990000">,</span>
<span style="color: #000000">   10:</span>                    z<span style="color: #990000">=</span>self<span style="color: #990000">.</span>z <span style="color: #990000">+</span> tz<span style="color: #990000">)</span>
<span style="color: #000000">   11:</span> Vertex3<span style="color: #990000">.</span>translate <span style="color: #990000">=</span> translate
<span style="color: #000000">   12:</span>
<span style="color: #000000">   13:</span>
<span style="color: #000000">   14:</span> <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">rotateX</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span> angle_in_radians<span style="color: #990000">):</span>
<span style="color: #000000">   15:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span>self<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   16:</span>                    y<span style="color: #990000">=</span>self<span style="color: #990000">.</span>y<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">)</span> <span style="color: #990000">-</span> self<span style="color: #990000">.</span>z<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">),</span>
<span style="color: #000000">   17:</span>                    z<span style="color: #990000">=</span>self<span style="color: #990000">.</span>y<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">)</span> <span style="color: #990000">+</span> self<span style="color: #990000">.</span>z<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">))</span>
<span style="color: #000000">   18:</span> Vertex3<span style="color: #990000">.</span>rotateX <span style="color: #990000">=</span> rotateX
<span style="color: #000000">   19:</span>
<span style="color: #000000">   20:</span> <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">rotateY</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span> angle_in_radians<span style="color: #990000">):</span>
<span style="color: #000000">   21:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span>self<span style="color: #990000">.</span>z<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">)</span> <span style="color: #990000">+</span> self<span style="color: #990000">.</span>x<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">),</span>
<span style="color: #000000">   22:</span>                    y<span style="color: #990000">=</span>self<span style="color: #990000">.</span>y<span style="color: #990000">,</span>
<span style="color: #000000">   23:</span>                    z<span style="color: #990000">=</span>self<span style="color: #990000">.</span>z<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">)</span> <span style="color: #990000">-</span> self<span style="color: #990000">.</span>x<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">))</span>
<span style="color: #000000">   24:</span> Vertex3<span style="color: #990000">.</span>rotateY <span style="color: #990000">=</span> rotateY
<span style="color: #000000">   25:</span>
<span style="color: #000000">   26:</span> <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">rotateZ</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span> angle_in_radians<span style="color: #990000">):</span>
<span style="color: #000000">   27:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span>self<span style="color: #990000">.</span>x<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">)</span> <span style="color: #990000">-</span> self<span style="color: #990000">.</span>y<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">),</span>
<span style="color: #000000">   28:</span>                    y<span style="color: #990000">=</span>self<span style="color: #990000">.</span>x<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">)</span> <span style="color: #990000">+</span> self<span style="color: #990000">.</span>y<span style="color: #990000">*</span>math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>angle_in_radians<span style="color: #990000">),</span>
<span style="color: #000000">   29:</span>                    z<span style="color: #990000">=</span>self<span style="color: #990000">.</span>z<span style="color: #990000">)</span>
<span style="color: #000000">   30:</span> Vertex3<span style="color: #990000">.</span>rotateZ <span style="color: #990000">=</span> rotateZ
<span style="color: #000000">   31:</span>
<span style="color: #000000">   32:</span> <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span> scale_x<span style="color: #990000">,</span> scale_y<span style="color: #990000">,</span> scale_z<span style="color: #990000">):</span>
<span style="color: #000000">   33:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span>self<span style="color: #990000">.</span>x <span style="color: #990000">*</span> scale_x<span style="color: #990000">,</span>
<span style="color: #000000">   34:</span>                    y<span style="color: #990000">=</span>self<span style="color: #990000">.</span>y <span style="color: #990000">*</span> scale_y<span style="color: #990000">,</span>
<span style="color: #000000">   35:</span>                    z<span style="color: #990000">=</span>self<span style="color: #990000">.</span>z <span style="color: #990000">*</span> scale_z<span style="color: #990000">)</span>
<span style="color: #000000">   36:</span> Vertex3<span style="color: #990000">.</span>scale <span style="color: #990000">=</span> scale
<span style="color: #000000">   37:</span>
<span style="color: #000000">   38:</span> <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">ortho</span></span><span style="color: #990000">(</span>self<span style="color: #990000">,</span>
<span style="color: #000000">   39:</span>           min_x<span style="color: #990000">,</span>
<span style="color: #000000">   40:</span>           max_x<span style="color: #990000">,</span>
<span style="color: #000000">   41:</span>           min_y<span style="color: #990000">,</span>
<span style="color: #000000">   42:</span>           max_y<span style="color: #990000">,</span>
<span style="color: #000000">   43:</span>           min_z<span style="color: #990000">,</span>
<span style="color: #000000">   44:</span>           max_z<span style="color: #990000">):</span>
<span style="color: #000000">   45:</span>     x_length <span style="color: #990000">=</span> max_x<span style="color: #990000">-</span>min_x
<span style="color: #000000">   46:</span>     y_length <span style="color: #990000">=</span> max_y<span style="color: #990000">-</span>min_y
<span style="color: #000000">   47:</span>     z_length <span style="color: #990000">=</span> max_z<span style="color: #990000">-</span>min_z
<span style="color: #000000">   48:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> self<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=-(</span>max_x<span style="color: #990000">-</span>x_length<span style="color: #990000">/</span><span style="color: #993399">2.0</span><span style="color: #990000">),</span>
<span style="color: #000000">   49:</span>                           ty<span style="color: #990000">=-(</span>max_y<span style="color: #990000">-</span>y_length<span style="color: #990000">/</span><span style="color: #993399">2.0</span><span style="color: #990000">),</span>
<span style="color: #000000">   50:</span>                           tz<span style="color: #990000">=-(</span>max_z<span style="color: #990000">-</span>z_length<span style="color: #990000">/</span><span style="color: #993399">2.0</span><span style="color: #990000">))</span> <span style="color: #990000">\</span>
<span style="color: #000000">   51:</span>                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">/(</span>x_length<span style="color: #990000">/</span><span style="color: #993399">2.0</span><span style="color: #990000">),</span>
<span style="color: #000000">   52:</span>                       <span style="color: #993399">1</span><span style="color: #990000">/(</span>y_length<span style="color: #990000">/</span><span style="color: #993399">2.0</span><span style="color: #990000">),</span>
<span style="color: #000000">   53:</span>                       <span style="color: #993399">1</span><span style="color: #990000">/(-</span>z_length<span style="color: #990000">/</span><span style="color: #993399">2.0</span><span style="color: #990000">))</span>
<span style="color: #000000">   54:</span> Vertex3<span style="color: #990000">.</span>ortho <span style="color: #990000">=</span> ortho
<span style="color: #000000">   55:</span>
<span style="color: #000000">   56:</span> <span style="font-weight: bold"><span style="color: #000080"># Install</span></span> a key handler
<span style="color: #000000">   57:</span> <span style="font-weight: bold"><span style="color: #000080"># negate</span></span> z length because it is <span style="color: #008080">already</span> negative<span style="color: #990000">,</span> and <span style="font-weight: bold"><span style="color: #0000FF">do</span></span> not want to flip the data
<span style="color: #000000">   58:</span>
<span style="color: #000000">   59:</span> <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">rad_to_deg</span></span><span style="color: #990000">(</span>rad<span style="color: #990000">):</span>
<span style="color: #000000">   60:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #993399">57.296</span> <span style="color: #990000">*</span> rad
<span style="color: #000000">   61:</span> <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">deg_to_rad</span></span><span style="color: #990000">(</span>degree<span style="color: #990000">):</span>
<span style="color: #000000">   62:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> degree <span style="color: #990000">/</span> <span style="color: #993399">57.296</span>
<span style="color: #000000">   63:</span>
<span style="color: #000000">   64:</span> <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">perspective</span></span><span style="color: #990000">(</span>nearZ<span style="color: #990000">,</span>
<span style="color: #000000">   65:</span>                 farZ<span style="color: #990000">):</span>
<span style="color: #000000">   66:</span>     field_of_view <span style="color: #990000">=</span>  <span style="font-weight: bold"><span style="color: #000000">deg_to_rad</span></span><span style="color: #990000">(</span><span style="color: #993399">45.0</span><span style="color: #990000">/</span><span style="color: #993399">2.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   67:</span>     width<span style="color: #990000">,</span> height <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">glfwGetFramebufferSize</span></span><span style="color: #990000">(</span>window<span style="color: #990000">)</span>
<span style="color: #000000">   68:</span>     y_angle <span style="color: #990000">=</span>  <span style="color: #990000">(</span>w <span style="color: #990000">/</span> h<span style="color: #990000">)</span> <span style="color: #990000">*</span> field_of_view
<span style="color: #000000">   69:</span>
<span style="color: #000000">   70:</span>     sheared_x <span style="color: #990000">=</span> self<span style="color: #990000">.</span>x <span style="color: #990000">/</span> math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">fabs</span></span><span style="color: #990000">(</span>z<span style="color: #990000">)</span> <span style="color: #990000">*</span> math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">fabs</span></span><span style="color: #990000">(</span>nearZ<span style="color: #990000">)</span>
<span style="color: #000000">   71:</span>     sheared_y <span style="color: #990000">=</span> self<span style="color: #990000">.</span>y <span style="color: #990000">/</span> math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">fabs</span></span><span style="color: #990000">(</span>z<span style="color: #990000">)</span> <span style="color: #990000">*</span> math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">fabs</span></span><span style="color: #990000">(</span>nearZ<span style="color: #990000">)</span>
<span style="color: #000000">   72:</span>     projected <span style="color: #990000">=</span>  <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>sheared_x<span style="color: #990000">,</span>
<span style="color: #000000">   73:</span>                          sheared_y<span style="color: #990000">,</span>
<span style="color: #000000">   74:</span>                          self<span style="color: #990000">.</span>z<span style="color: #990000">)</span>
<span style="color: #000000">   75:</span>
<span style="color: #000000">   76:</span>     x_min_of_box <span style="color: #990000">=</span> math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">fabs</span></span><span style="color: #990000">(</span>nearZ<span style="color: #990000">)</span> <span style="color: #990000">*</span> math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">tan</span></span><span style="color: #990000">(</span>field_of_view<span style="color: #990000">)</span>
<span style="color: #000000">   77:</span>     y_min_of_box <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">fabs</span></span><span style="color: #990000">(</span>nearZ<span style="color: #990000">)</span> <span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #000000">tan</span></span><span style="color: #990000">(</span>y_angle<span style="color: #990000">)</span>
<span style="color: #000000">   78:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> projected<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ortho</span></span><span style="color: #990000">(</span>min_x<span style="color: #990000">=</span> <span style="color: #990000">-</span>x_min_of_box<span style="color: #990000">,</span>
<span style="color: #000000">   79:</span>                            max_x<span style="color: #990000">=</span> x_min_of_box<span style="color: #990000">,</span>
<span style="color: #000000">   80:</span>                            min_y<span style="color: #990000">=</span> <span style="color: #990000">-</span>y_min_of_box<span style="color: #990000">,</span>
<span style="color: #000000">   81:</span>                            max_y<span style="color: #990000">=</span> y_min_of_box<span style="color: #990000">,</span>
<span style="color: #000000">   82:</span>                            min_z<span style="color: #990000">=</span> nearZ<span style="color: #990000">,</span>
<span style="color: #000000">   83:</span>                            max_z<span style="color: #990000">=</span> farZ<span style="color: #990000">)</span>
<span style="color: #000000">   84:</span> </tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> paddle1<span style="color: #990000">.</span>vertices <span style="color: #990000">=</span> <span style="color: #990000">[</span><span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=-</span><span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=-</span><span style="color: #993399">30.0</span><span style="color: #990000">,</span> z<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    2:</span>                     <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> <span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=-</span><span style="color: #993399">30.0</span><span style="color: #990000">,</span> z<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    3:</span>                     <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> <span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=</span> <span style="color: #993399">30.0</span><span style="color: #990000">,</span> z<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    4:</span>                     <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=-</span><span style="color: #993399">10.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=</span><span style="color: #993399">30.0</span><span style="color: #990000">,</span>  z<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)]</span>
<span style="color: #000000">    5:</span> paddle2<span style="color: #990000">.</span>vertices <span style="color: #990000">=</span> paddle1<span style="color: #990000">.</span>vertices
<span style="color: #000000">    6:</span>
<span style="color: #000000">    7:</span> square <span style="color: #990000">=</span> <span style="color: #990000">[</span><span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=-</span><span style="color: #993399">5.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=-</span><span style="color: #993399">5.0</span><span style="color: #990000">,</span> z<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    8:</span>           <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> <span style="color: #993399">5.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=-</span><span style="color: #993399">5.0</span><span style="color: #990000">,</span> z<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">),</span>
<span style="color: #000000">    9:</span>           <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=</span> <span style="color: #993399">5.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=</span> <span style="color: #993399">5.0</span><span style="color: #990000">,</span> z<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">),</span>
<span style="color: #000000">   10:</span>           <span style="font-weight: bold"><span style="color: #000000">Vertex3</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=-</span><span style="color: #993399">5.0</span><span style="color: #990000">,</span> y<span style="color: #990000">=</span><span style="color: #993399">5.0</span><span style="color: #990000">,</span>  z<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)]</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>self<span style="color: #990000">):</span>
<span style="color: #000000">    2:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span>r<span style="color: #990000">,</span>
<span style="color: #000000">    3:</span>               self<span style="color: #990000">.</span>g<span style="color: #990000">,</span>
<span style="color: #000000">    4:</span>               self<span style="color: #990000">.</span>b<span style="color: #990000">)</span>
<span style="color: #000000">    5:</span>
<span style="color: #000000">    6:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> modelspace <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> self<span style="color: #990000">.</span>vertices<span style="color: #990000">:</span>
<span style="color: #000000">    8:</span>         worldSpace <span style="color: #990000">=</span> modelspace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotateZ</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span>rotation<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">    9:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>self<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   10:</span>                                           ty<span style="color: #990000">=</span>self<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>y<span style="color: #990000">,</span>
<span style="color: #000000">   11:</span>                                           tz<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   12:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   13:</span>                                           ty<span style="color: #990000">=</span>self<span style="color: #990000">.</span>offsetY<span style="color: #990000">,</span>
<span style="color: #000000">   14:</span>                                           tz<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   15:</span>
<span style="color: #000000">   16:</span>         cameraSpace <span style="color: #990000">=</span> worldSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=-</span>camera_x<span style="color: #990000">,</span>
<span style="color: #000000">   17:</span>                                            ty<span style="color: #990000">=-</span>camera_y<span style="color: #990000">,</span>
<span style="color: #000000">   18:</span>                                            tz<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   19:</span>         ndcSpace <span style="color: #990000">=</span> cameraSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ortho</span></span><span style="color: #990000">(</span>min_x<span style="color: #990000">=</span> <span style="color: #990000">-</span><span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   20:</span>                                      max_x<span style="color: #990000">=</span> <span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   21:</span>                                      min_y<span style="color: #990000">=</span> <span style="color: #990000">-</span><span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   22:</span>                                      max_y<span style="color: #990000">=</span> <span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   23:</span>                                      min_z<span style="color: #990000">=</span> <span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   24:</span>                                      max_z<span style="color: #990000">=</span> <span style="color: #990000">-</span><span style="color: #993399">100.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   25:</span>         <span style="font-weight: bold"><span style="color: #000000">glVertex3f</span></span><span style="color: #990000">(</span>ndcSpace<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   26:</span>                    ndcSpace<span style="color: #990000">.</span>y<span style="color: #990000">,</span>
<span style="color: #000000">   27:</span>                    ndcSpace<span style="color: #990000">.</span>z<span style="color: #990000">)</span>
<span style="color: #000000">   28:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   29:</span> Paddle<span style="color: #990000">.</span>draw <span style="color: #990000">=</span> draw
<span style="color: #000000">   30:</span>
<span style="color: #000000">   31:</span>
<span style="color: #000000">   32:</span> @<span style="font-weight: bold"><span style="color: #000000">demoNumber</span></span><span style="color: #990000">(</span><span style="color: #993399">12</span><span style="color: #990000">)</span>
<span style="color: #000000">   33:</span> <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">demo12</span></span><span style="color: #990000">():</span>
<span style="color: #000000">   34:</span>     <span style="font-weight: bold"><span style="color: #000000">draw_in_square_viewport</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   35:</span>     <span style="font-weight: bold"><span style="color: #000000">handle_inputs</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   36:</span> </tt></pre></div></div>
<div class="paragraph"><p>Draw square, relative to paddle 1.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span>     paddle1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span>
<span style="color: #000000">    2:</span>
<span style="color: #000000">    3:</span>     <span style="font-weight: bold"><span style="color: #000000">glColor3f</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span> #r
<span style="color: #000000">    4:</span>               <span style="color: #993399">0.0</span><span style="color: #990000">,</span> #g
<span style="color: #000000">    5:</span>               <span style="color: #993399">1.0</span><span style="color: #990000">)</span> #b
<span style="color: #000000">    6:</span>     <span style="font-weight: bold"><span style="color: #000000">glBegin</span></span><span style="color: #990000">(</span>GL_QUADS<span style="color: #990000">)</span>
<span style="color: #000000">    7:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> modelspace <span style="color: #008080">in</span> square<span style="color: #990000">:</span>
<span style="color: #000000">    8:</span>         worldSpace <span style="color: #990000">=</span> modelspace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotateZ</span></span><span style="color: #990000">(</span>square_rotation<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">    9:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span><span style="color: #993399">20.0</span><span style="color: #990000">,</span> ty<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span> tz<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   10:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotateZ</span></span><span style="color: #990000">(</span>rotationAroundPaddle1<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   11:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">rotateZ</span></span><span style="color: #990000">(</span>paddle1<span style="color: #990000">.</span>rotation<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   12:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   13:</span>                                           ty<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>globalPosition<span style="color: #990000">.</span>y<span style="color: #990000">,</span>
<span style="color: #000000">   14:</span>                                           tz<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span> <span style="color: #990000">\</span>
<span style="color: #000000">   15:</span>                                <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>offsetX<span style="color: #990000">,</span>
<span style="color: #000000">   16:</span>                                           ty<span style="color: #990000">=</span>paddle1<span style="color: #990000">.</span>offsetY<span style="color: #990000">,</span>
<span style="color: #000000">   17:</span>                                           tz<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   18:</span>
<span style="color: #000000">   19:</span>         cameraSpace <span style="color: #990000">=</span> worldSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">translate</span></span><span style="color: #990000">(</span>tx<span style="color: #990000">=-</span>camera_x<span style="color: #990000">,</span>
<span style="color: #000000">   20:</span>                                            ty<span style="color: #990000">=-</span>camera_y<span style="color: #990000">,</span>
<span style="color: #000000">   21:</span>                                            tz<span style="color: #990000">=</span><span style="color: #993399">0.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   22:</span>         ndcSpace <span style="color: #990000">=</span> cameraSpace<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ortho</span></span><span style="color: #990000">(</span>min_x<span style="color: #990000">=</span> <span style="color: #990000">-</span><span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   23:</span>                                      max_x<span style="color: #990000">=</span> <span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   24:</span>                                      min_y<span style="color: #990000">=</span> <span style="color: #990000">-</span><span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   25:</span>                                      max_y<span style="color: #990000">=</span> <span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   26:</span>                                      min_z<span style="color: #990000">=</span> <span style="color: #993399">100.0</span><span style="color: #990000">,</span>
<span style="color: #000000">   27:</span>                                      max_z<span style="color: #990000">=</span> <span style="color: #990000">-</span><span style="color: #993399">100.0</span><span style="color: #990000">)</span>
<span style="color: #000000">   28:</span>         <span style="font-weight: bold"><span style="color: #000000">glVertex3f</span></span><span style="color: #990000">(</span>ndcSpace<span style="color: #990000">.</span>x<span style="color: #990000">,</span>
<span style="color: #000000">   29:</span>                    ndcSpace<span style="color: #990000">.</span>y<span style="color: #990000">,</span>
<span style="color: #000000">   30:</span>                    ndcSpace<span style="color: #990000">.</span>z<span style="color: #990000">)</span>
<span style="color: #000000">   31:</span>     <span style="font-weight: bold"><span style="color: #000000">glEnd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">   32:</span>
<span style="color: #000000">   33:</span>     paddle2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">()</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_moving_the_camera_in_3d">15. Moving the Camera in 3D</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> moving_camera_x <span style="color: #990000">=</span> <span style="color: #993399">0.0</span>
<span style="color: #000000">    2:</span> moving_camera_y <span style="color: #990000">=</span> <span style="color: #993399">0.0</span>
<span style="color: #000000">    3:</span> moving_camera_z <span style="color: #990000">=</span> <span style="color: #993399">0.0</span>
<span style="color: #000000">    4:</span> moving_camera_rot_y <span style="color: #990000">=</span> <span style="color: #993399">0.0</span>
<span style="color: #000000">    5:</span> moving_camera_rot_x <span style="color: #990000">=</span> <span style="color: #993399">0.0</span>
<span style="color: #000000">    6:</span>
<span style="color: #000000">    7:</span>
<span style="color: #000000">    8:</span> <span style="color: #008080">def</span> <span style="font-weight: bold"><span style="color: #000000">handle_3D_movement</span></span><span style="color: #990000">():</span>
<span style="color: #000000">    9:</span>     <span style="color: #008080">global</span> moving_camera_x
<span style="color: #000000">   10:</span>     <span style="color: #008080">global</span> moving_camera_y
<span style="color: #000000">   11:</span>     <span style="color: #008080">global</span> moving_camera_z
<span style="color: #000000">   12:</span>     <span style="color: #008080">global</span> moving_camera_rot_x
<span style="color: #000000">   13:</span>     <span style="color: #008080">global</span> moving_camera_rot_y
<span style="color: #000000">   14:</span>
<span style="color: #000000">   15:</span>     move_multiple <span style="color: #990000">=</span> <span style="color: #993399">15.0</span>
<span style="color: #000000">   16:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> glfw<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_RIGHT<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   17:</span>         moving_camera_rot_y <span style="color: #990000">-=</span> <span style="color: #993399">0.03</span>
<span style="color: #000000">   18:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> glfw<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_LEFT<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   19:</span>         moving_camera_rot_y <span style="color: #990000">+=</span> <span style="color: #993399">0.03</span>
<span style="color: #000000">   20:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> glfw<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_PAGE_UP<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   21:</span>         moving_camera_rot_x <span style="color: #990000">+=</span> <span style="color: #993399">0.03</span>
<span style="color: #000000">   22:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> glfw<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_PAGE_DOWN<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   23:</span>         moving_camera_rot_x <span style="color: #990000">-=</span> <span style="color: #993399">0.03</span><span style="color: #990000">;</span>
<span style="color: #000000">   24:</span> <span style="font-style: italic"><span style="color: #9A1900">//TODO -  explaing movement on XZ-plane</span></span>
<span style="color: #000000">   25:</span> <span style="font-style: italic"><span style="color: #9A1900">//TODO -  show camera movement in graphviz</span></span>
<span style="color: #000000">   26:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> glfw<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_UP<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   27:</span>         moving_camera_x <span style="color: #990000">-=</span> move_multiple <span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>moving_camera_rot_y<span style="color: #990000">)</span>
<span style="color: #000000">   28:</span>         moving_camera_z <span style="color: #990000">-=</span> move_multiple <span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>moving_camera_rot_y<span style="color: #990000">)</span>
<span style="color: #000000">   29:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> glfw<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">glfwGetKey</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> GLFW_KEY_DOWN<span style="color: #990000">)</span> <span style="color: #990000">==</span> GLFW_PRESS<span style="color: #990000">:</span>
<span style="color: #000000">   30:</span>         moving_camera_x <span style="color: #990000">+=</span> move_multiple <span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>moving_camera_rot_y<span style="color: #990000">);</span>
<span style="color: #000000">   31:</span>         moving_camera_z <span style="color: #990000">+=</span> move_multiple <span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>moving_camera_rot_y<span style="color: #990000">);</span>
<span style="color: #000000">   32:</span>
<span style="color: #000000">   33:</span> inputHandlers<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>handle_3D_movement<span style="color: #990000">)</span>
<span style="color: #000000">   34:</span>
<span style="color: #000000">   35:</span> </tt></pre></div></div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Last updated
 2018-05-26 19:39:36 EST
</div>
</div>
</body>
</html>
