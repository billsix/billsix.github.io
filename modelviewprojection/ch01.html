

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Opening a Window - Demo 01 &mdash; Model View Projection 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="static/documentation_options.js"></script>
        <script src="static/jquery.js"></script>
        <script src="static/underscore.js"></script>
        <script src="static/doctools.js"></script>
        <script src="static/language_data.js"></script>
    
    <script type="text/javascript" src="static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Draw A Rectange - Demo 02" href="ch02.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Model View Projection
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Opening a Window - Demo 01</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#purpose">Purpose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code">Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#opening-a-window">Opening A Window</a></li>
<li class="toctree-l2"><a class="reference internal" href="#glfw-opengl-initialization">GLFW/OpenGL Initialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-event-loop">The Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="#black-screen">Black Screen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ch02.html">Draw A Rectange - Demo 02</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch03.html">Window Resizing and Proportionality - Demo 03</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch04.html">Moving the Paddles - Keyboard Input - Demo 04</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch05.html">Add Translate Method to Vertex - Demo 05</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch06.html">Modelspace - Demo 06</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch07.html">Rotations - Demo 07</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch08.html">Rotation Fix Attempt 1 - Demo 08</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch09.html">Rotation Fixed - Sequence of Transforamations - Demo 09</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch10.html">Camera Space - Demo 10</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch11.html">Relative Objects - Demo 11</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch12.html">Rotate the Square - Demo 12</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch13.html">Rotate the Square Around Paddle 1 - Demo 13</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch14.html">Adding Depth - Z axis Demo 14</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch15.html">Adding Depth - Enable Depth Buffer - Demo 15</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Model View Projection</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Opening a Window - Demo 01</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="sources/ch01.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="opening-a-window-demo-01">
<h1>Opening a Window - Demo 01<a class="headerlink" href="#opening-a-window-demo-01" title="Permalink to this headline">¶</a></h1>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>Learn how to open a window, make a black screen, and close
the window.</p>
</div>
<div class="section" id="basics">
<h2>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h2>
<p>The device attached to a computer which displays information to the user is called a <em>monitor</em>.</p>
<p>The monitor is composed of a two-dimensional array of light-emitting elements, each called a <em>pixel</em>.</p>
<p>At a given time, each individual pixel is instructed by the computer to display
one specific color, represented within the computer as a number.
The aggregate of the colors at each pixel at one moment in time, called a <em>frame</em>,
provides a picture that has some meaning to the human user.
# In OpenGL, the bottom left pixel of a window is coordinate (0,0).  The top right is (window_width,window_height)</p>
<div class="align-center figure" id="id1">
<img alt="1024x768 monitor" src="images/monitor.png" />
<p class="caption"><span class="caption-text">1024x768 monitor</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="align-center figure" id="id2">
<img alt="1920x1200 monitor" src="images/monitor2.png" />
<p class="caption"><span class="caption-text">1920x1200 monitor</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Frames are created within the computer and sent to the monitor
at a rate over time, called the <em>framerate</em>,
measured in <em>Hertz</em>.  By updating frames quickly and at a constant rate, the computer
provides the end-user with the illusion of motion.</p>
</div>
<div class="section" id="code">
<h2>Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<p>Import Python modules.  Python’s modules are a way of distributing code
without namespace collisions</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>  <span class="c1"># sys is imported, all function calls will be of sys.function</span>
<span class="kn">import</span> <span class="nn">os</span>  <span class="c1"># basic operating system functions</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>  <span class="c1"># numpy is a fast math/matrix library.</span>
<span class="kn">import</span> <span class="nn">math</span>  <span class="c1"># basic math utilities</span>
<span class="kn">from</span> <span class="nn">OpenGL.GL</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c1"># here, we are importing OpenGL&#39;s submodule GL</span>
</pre></div>
</td></tr></table></div>
<p>But we will not need the module’s prefix to call
the functions.  I did this for uniformity
with the C++ code in the Superbible book.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glfw</span>  <span class="c1"># the windowing library</span>
</pre></div>
</td></tr></table></div>
<p>On a Python prompt, you can use tab-complete to see which functions
are defined on a module.  you can also type help(modulename) (q is
used to quit out of the pager).  help works on any object, including modules.</p>
</div>
<div class="section" id="opening-a-window">
<h2>Opening A Window<a class="headerlink" href="#opening-a-window" title="Permalink to this headline">¶</a></h2>
<p>Desktop operating systems allow the user to run more than one
program at a time, where each program draws into a subsection of
the monitor called a window.</p>
<p>To create and to open a window in a cross-platform manner, this
book will call procedures provided by the widely-ported GLFW library (supporting Windows, macOS, Linux).
GLFW also provides procedures for receiving
keyboard input and for controller.</p>
</div>
<div class="section" id="glfw-opengl-initialization">
<h2>GLFW/OpenGL Initialization<a class="headerlink" href="#glfw-opengl-initialization" title="Permalink to this headline">¶</a></h2>
<p>Initialize GLFW.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="k">if</span> <span class="ow">not</span> <span class="n">glfw</span><span class="o">.</span><span class="n">init</span><span class="p">():</span>  <span class="c1"># many objects can be treating as booleans,</span>
      <span class="c1"># and the Python keyword &quot;not&quot; negates it</span>
      <span class="c1"># Python does not use brackets to show nesting.</span>
      <span class="c1"># instead it uses whitespace.</span>
      <span class="c1"># You probably want to find keyboard shortcuts</span>
      <span class="c1"># to indent/unindent.  On Emacs, I use tab</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>  <span class="c1"># if you can&#39;t create a window, quit</span>
</pre></div>
</td></tr></table></div>
<p>One frame is created incrementally at a time on the CPU, but the frame
is sent to the monitor
only when frame is completely drawn, and each pixel has a color.
The act of sending the frame to the monitor is called <em>flushing</em>
the frame.
Flushing takes time,
and if the call to flush were to block (meaning it would not return control
back to the call-ing procedure until the flush is complete), we would
have wasted CPU time.  To avoid this,
OpenGL has two <em>framebuffers</em> (regions of memory which will eventually
contain the full data for a frame),
only one of which is “active”, or writable, at a given time.
“glfwSwapBuffers” is a non-blocking call which initiates the flushing
the current buffer, and which switches the current writable framebuffer to the
other one, thus allowing the CPU to resume.  If this doesn’t make
sense right now, don’t worry.</p>
<p>Set the version of OpenGL</p>
<p>OpenGL has been around a long time, and has multiple, possibly incompatible versions.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">glfw</span><span class="o">.</span><span class="n">window_hint</span><span class="p">(</span>
      <span class="n">glfw</span><span class="o">.</span><span class="n">CONTEXT_VERSION_MAJOR</span><span class="p">,</span> <span class="mi">1</span>
  <span class="p">)</span>  <span class="c1"># python methods normally use lower case</span>
  <span class="c1"># and words are seperated by underscores.</span>
  <span class="n">glfw</span><span class="o">.</span><span class="n">window_hint</span><span class="p">(</span><span class="n">glfw</span><span class="o">.</span><span class="n">CONTEXT_VERSION_MINOR</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Create a 500 pixel by 500 pixel window, which the user can resize.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">window</span> <span class="o">=</span> <span class="n">glfw</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="s2">&quot;ModelViewProjection Demo 1&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>None is the equivalent of null.
I frequently will put argument lists vertically, though it in not required.</p>
<p>If GLFW cannot open the window, quit.  Unlike MC Hammer, we are quite legit, yet still
able to quit.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="k">if</span> <span class="ow">not</span> <span class="n">window</span><span class="p">:</span>
      <span class="n">glfw</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>  <span class="c1"># need to clean up gracefully</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Make the window’s context current</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">glfw</span><span class="o">.</span><span class="n">make_context_current</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Install a key handler.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="k">def</span> <span class="nf">on_key</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">scancode</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">mods</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">KEY_ESCAPE</span> <span class="ow">and</span> <span class="n">action</span> <span class="o">==</span> <span class="n">glfw</span><span class="o">.</span><span class="n">PRESS</span><span class="p">:</span>
          <span class="n">glfw</span><span class="o">.</span><span class="n">set_window_should_close</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

  <span class="n">glfw</span><span class="o">.</span><span class="n">set_key_callback</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">on_key</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Functions are first class values in Python, and are objects just
like anything else.  The can be passed as arguments, for evaluation
later</p>
<p>For every frame drawn, each pixel has a default color, set by
calling “glClearColor”. “0,0,0,1”, means black “0,0,0”, without
transparency (the “1”).</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">glClearColor</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Don’t worry about the 4 lines here.  Although they are necessary,
we will cover them later.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_PROJECTION</span><span class="p">)</span>
  <span class="n">glLoadIdentity</span><span class="p">()</span>
  <span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_MODELVIEW</span><span class="p">)</span>
  <span class="n">glLoadIdentity</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="the-event-loop">
<h2>The Event Loop<a class="headerlink" href="#the-event-loop" title="Permalink to this headline">¶</a></h2>
<p>When you pause a movie, motion stops and you see one picture.
Movies are composed of sequence of pictures, when
rendered in quick succession, provide the illusion of motion.</p>
<p>Interactive computer graphics are rendered the same way,
one “frame” at a time.</p>
<p>Render a frame, flush the complete frame to the monitor.
Unless the user closed the window, repeat indefinitely.</p>
<p>The color of each pixel within
the current framebuffer
is reset to a default color.</p>
<p>When a graphics application is executing, it is creating new
frames (pictures) at some rate (e.g. 60 frames per second).  At any given
frame, the user of the application might do something, (e.g.
move the mouse, click, type on the keyboard, close the application).</p>
<p>At the beginning of every frame, ask GLFW if it received one
of these events since we last asked (i.e., the previous frame).</p>
<p>Loop until the user closes the window</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="k">while</span> <span class="ow">not</span> <span class="n">glfw</span><span class="o">.</span><span class="n">window_should_close</span><span class="p">(</span><span class="n">window</span><span class="p">):</span>
      <span class="c1"># Poll for and process events</span>
      <span class="n">glfw</span><span class="o">.</span><span class="n">poll_events</span><span class="p">()</span>

      <span class="c1"># get the size of the framebuffer.  Python</span>
      <span class="c1"># allows the returning of multiple values</span>
      <span class="c1"># in the form of a tuple.  Assigning</span>
      <span class="c1"># to the variables this way is a form of &quot;destructuring&quot;</span>
      <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">glfw</span><span class="o">.</span><span class="n">get_framebuffer_size</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
      <span class="n">glViewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
      <span class="c1"># since the frame is about to be drawn, make it a blank slate.</span>
      <span class="c1"># the color of each pixel will be the clear color.</span>
      <span class="c1"># Programming in OpenGL is a bit different than normal programming,</span>
      <span class="c1"># in that individual function calls do not always do everything you need</span>
      <span class="c1"># in isolation.  Instead, they mutate state, which may require</span>
      <span class="c1"># multiple function calls to complete a certain task.</span>
      <span class="n">glClear</span><span class="p">(</span><span class="n">GL_COLOR_BUFFER_BIT</span> <span class="o">|</span> <span class="n">GL_DEPTH_BUFFER_BIT</span><span class="p">)</span>

      <span class="c1"># render scene</span>
      <span class="c1"># do nothing</span>

      <span class="c1"># done with frame, flush and swap buffers</span>
      <span class="c1"># Swap front and back buffers</span>
      <span class="n">glfw</span><span class="o">.</span><span class="n">swap_buffers</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>

  <span class="n">glfw</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="black-screen">
<h2>Black Screen<a class="headerlink" href="#black-screen" title="Permalink to this headline">¶</a></h2>
<p>Type “python demo.py”, or “python3 demo.py” to run.</p>
<p>The first demo is the least interesting graphical program possible.</p>
<p>#. Sets the color at every pixel black.  (A constant color is better than whatever
color happened to be the previous time it was drawn.)</p>
<p>#. If the user resized the window, reset OpenGL’s mappings from <em>normalized-device-coordinates</em>
to <em>screen-coordinates</em>.</p>
<ol class="arabic simple">
<li><p>Cleared the depth buffer (don’t worry about this for now).</p></li>
</ol>
<p>When this code returns, the event loop flushes (i.e) sends the frame to the monitor.  Since
no geometry was drawn, the color value for each pixel is still black.</p>
<p>Each color is represented by a number, so the frame is something like this:</p>
<p>bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb</p>
<p>The event loop then calls this code over and over again, and since we retain no state and
we draw nothing, a black screen will be displayed every frame until the user
closes the window, and says to himself, “why did I buy Doom 3”?</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ch02.html" class="btn btn-neutral float-right" title="Draw A Rectange - Demo 02" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="intro.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, William Emerison Six

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>